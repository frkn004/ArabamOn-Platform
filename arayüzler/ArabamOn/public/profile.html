<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kullanıcı Paneli - Arabamon</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 15px 0;
            margin-bottom: 30px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #0066cc;
        }

        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-name {
            margin-right: 15px;
        }
        
        .logout-btn {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .sidebar {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .sidebar-menu {
            list-style: none;
        }
        
        .sidebar-menu li {
            margin-bottom: 10px;
        }
        
        .sidebar-menu a {
            display: block;
            padding: 10px;
            color: #333;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background-color: #f0f0f0;
        }
        
        .sidebar-menu a i {
            margin-right: 10px;
            color: #0066cc;
        }
        
        .main-content {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .section-title {
            font-size: 20px;
            margin-bottom: 20px;
            color: #0066cc;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .form-group textarea {
            height: 100px;
            resize: vertical;
        }
        
        .btn {
            display: inline-block;
            padding: 8px 15px;
            background-color: #0066cc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .btn-primary {
            background-color: #0066cc;
        }
        
        .btn-success {
            background-color: #4caf50;
        }
        
        .btn-danger {
            background-color: #f44336;
        }
        
        .btn-warning {
            background-color: #ff9800;
        }
        
        .card {
            border: 1px solid #eee;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .card-title {
            font-weight: bold;
        }
        
        .card-status {
            font-size: 14px;
            padding: 3px 8px;
            border-radius: 20px;
            font-weight: bold;
        }

        .status-pending {
            background-color: #ff9800;
            color: white;
        }

        .status-confirmed {
            background-color: #4caf50;
            color: white;
        }

        .status-cancelled {
            background-color: #f44336;
            color: white;
        }

        .status-completed {
            background-color: #2196f3;
            color: white;
        }
        
        .card-content {
            margin-bottom: 10px;
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        .coupon-card {
            border: 2px dashed #0066cc;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
            background-color: #f0f9ff;
        }
        
        .coupon-code {
            font-family: monospace;
            font-size: 18px;
            font-weight: bold;
            background-color: #fff;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            margin: 10px 0;
        }
        
        .coupon-details {
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .review-form {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-top: 10px;
        }
        
        .star-rating {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .star-rating input {
            display: none;
        }

        .star-rating label {
            cursor: pointer;
            font-size: 24px;
            color: #ddd;
        }
        
        .star-rating label:hover,
        .star-rating label:hover ~ label,
        .star-rating input:checked ~ label {
            color: #ffc107;
        }
        
        /* Bildirim Stilleri */
        #notification-area {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            width: 300px;
        }

        .notification {
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            margin-bottom: 10px;
            animation: slideIn 0.3s ease;
        }
        
        .notification.success {
            border-left: 5px solid #4caf50;
        }
        
        .notification.error {
            border-left: 5px solid #f44336;
        }
        
        .notification.info {
            border-left: 5px solid #0066cc;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Responsive Styles */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                margin-bottom: 20px;
            }
            
            .sidebar-menu {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .sidebar-menu li {
                margin-bottom: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">ArabamON Kullanıcı Paneli</div>
            <div class="user-info">
                <div class="user-name">Hoşgeldiniz, <span id="user-name">Kullanıcı</span></div>
                <button class="logout-btn" id="logout-btn">Çıkış Yap</button>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="dashboard">
            <div class="sidebar">
                <ul class="sidebar-menu">
                    <li><a href="#profile" class="active" data-section="profile-section"><i class="fas fa-user"></i> Profilim</a></li>
                    <li><a href="#appointments" data-section="appointments-section"><i class="fas fa-calendar-alt"></i> Randevularım</a></li>
                    <li><a href="#past-appointments" data-section="past-appointments-section"><i class="fas fa-history"></i> Geçmiş Randevular</a></li>
                    <li><a href="#reviews" data-section="reviews-section"><i class="fas fa-star"></i> Yorumlarım</a></li>
                    <li><a href="#coupons" data-section="coupons-section"><i class="fas fa-ticket-alt"></i> Kuponlarım</a></li>
                    <li><a href="#vehicles" data-section="vehicles-section"><i class="fas fa-car"></i> Araçlarım</a></li>
                </ul>
            </div>

            <div class="main-content">
                <!-- Profil Bilgileri -->
                <div id="profile-section" class="section active">
                    <h2 class="section-title">Profil Bilgilerim</h2>
                    <form id="profile-form">
                        <div class="form-group">
                            <label for="name">Ad Soyad</label>
                            <input type="text" id="name" value="Normal Kullanıcı" required>
                        </div>
                        <div class="form-group">
                            <label for="email">E-posta</label>
                            <input type="email" id="email" value="user@arabamon.com" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Telefon</label>
                            <input type="tel" id="phone" value="0555 123 45 67" required>
                        </div>
                        <div class="form-group">
                            <label for="current-password">Mevcut Şifre</label>
                            <input type="password" id="current-password">
                        </div>
                        <div class="form-group">
                            <label for="new-password">Yeni Şifre</label>
                            <input type="password" id="new-password">
                        </div>
                        <div class="form-group">
                            <label for="confirm-password">Yeni Şifre (Tekrar)</label>
                            <input type="password" id="confirm-password">
                        </div>
                        <button type="submit" class="btn btn-primary">Profili Güncelle</button>
                    </form>
                </div>

                <!-- Aktif Randevular -->
                <div id="appointments-section" class="section">
                    <h2 class="section-title">Aktif Randevularım</h2>
                    <div id="appointments-list">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Kristal Oto Yıkama</div>
                                <div class="card-status status-confirmed">Onaylandı</div>
                        </div>
                            <div class="card-content">
                                <p><strong>Hizmet:</strong> Premium Yıkama</p>
                                <p><strong>Tarih/Saat:</strong> 15 Nisan 2023, 14:30</p>
                                <p><strong>Adres:</strong> Atatürk Cad. No:123, Kadıköy/İstanbul</p>
                                <p><strong>Notlar:</strong> Araç anahtarları resepsiyona bırakılacak.</p>
                    </div>
                            <div class="card-actions">
                                <button class="btn btn-danger">İptal Et</button>
                                <button class="btn btn-warning">Yeniden Planla</button>
                </div>
            </div>
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Pro Expertiz Merkezi</div>
                                <div class="card-status status-pending">Beklemede</div>
        </div>
                            <div class="card-content">
                                <p><strong>Hizmet:</strong> Detaylı Expertiz</p>
                                <p><strong>Tarih/Saat:</strong> 20 Nisan 2023, 10:00</p>
                                <p><strong>Adres:</strong> Bağdat Cad. No:45, Maltepe/İstanbul</p>
                                <p><strong>Notlar:</strong> Aracın ruhsatı yanımda olacak.</p>
    </div>
                            <div class="card-actions">
                                <button class="btn btn-danger">İptal Et</button>
                                <button class="btn btn-warning">Yeniden Planla</button>
        </div>
                                </div>
                                </div>
                            </div>
                
                <!-- Geçmiş Randevular -->
                <div id="past-appointments-section" class="section">
                    <h2 class="section-title">Geçmiş Randevularım</h2>
                    <div id="past-appointments-list">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Hızlı Lastik Değişim</div>
                                <div class="card-status status-completed">Tamamlandı</div>
                        </div>
                            <div class="card-content">
                                <p><strong>Hizmet:</strong> Lastik Değişimi (4 Adet)</p>
                                <p><strong>Tarih/Saat:</strong> 5 Mart 2023, 11:00</p>
                                <p><strong>Tutar:</strong> 1.200 ₺</p>
                    </div>
                            <div class="card-actions">
                                <button class="btn btn-primary review-btn" data-appointment-id="101">Yorum Yap</button>
                                    </div>
                            <div class="review-form" style="display: none;">
                                <h4>Değerlendirme Yap</h4>
                                <div class="star-rating">
                                    <input type="radio" name="rating" id="star5" value="5">
                                    <label for="star5"><i class="fas fa-star"></i></label>
                                    <input type="radio" name="rating" id="star4" value="4">
                                    <label for="star4"><i class="fas fa-star"></i></label>
                                    <input type="radio" name="rating" id="star3" value="3">
                                    <label for="star3"><i class="fas fa-star"></i></label>
                                    <input type="radio" name="rating" id="star2" value="2">
                                    <label for="star2"><i class="fas fa-star"></i></label>
                                    <input type="radio" name="rating" id="star1" value="1">
                                    <label for="star1"><i class="fas fa-star"></i></label>
                                </div>
                                <div class="form-group">
                                    <textarea placeholder="Yorumunuzu buraya yazın..."></textarea>
                                </div>
                                <button class="btn btn-primary">Gönder</button>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Kristal Oto Yıkama</div>
                                <div class="card-status status-completed">Tamamlandı</div>
                    </div>
                            <div class="card-content">
                                <p><strong>Hizmet:</strong> Standart Yıkama</p>
                                <p><strong>Tarih/Saat:</strong> 20 Şubat 2023, 16:00</p>
                                <p><strong>Tutar:</strong> 150 ₺</p>
                </div>
                            <div class="card-actions">
                                <button class="btn btn-primary review-btn" data-appointment-id="102">Yorum Yap</button>
            </div>
                            <div class="review-form" style="display: none;">
                                <h4>Değerlendirme Yap</h4>
                                <div class="star-rating">
                                    <input type="radio" name="rating" id="star5-2" value="5">
                                    <label for="star5-2"><i class="fas fa-star"></i></label>
                                    <input type="radio" name="rating" id="star4-2" value="4">
                                    <label for="star4-2"><i class="fas fa-star"></i></label>
                                    <input type="radio" name="rating" id="star3-2" value="3">
                                    <label for="star3-2"><i class="fas fa-star"></i></label>
                                    <input type="radio" name="rating" id="star2-2" value="2">
                                    <label for="star2-2"><i class="fas fa-star"></i></label>
                                    <input type="radio" name="rating" id="star1-2" value="1">
                                    <label for="star1-2"><i class="fas fa-star"></i></label>
                        </div>
                                <div class="form-group">
                                    <textarea placeholder="Yorumunuzu buraya yazın..."></textarea>
                                </div>
                                <button class="btn btn-primary">Gönder</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Yorumlar -->
                <div id="reviews-section" class="section">
                    <h2 class="section-title">Yorumlarım</h2>
                    <div id="reviews-list">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Kristal Oto Yıkama</div>
                                    <div>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    </div>
                                </div>
                            <div class="card-content">
                                <p>"Çok memnun kaldım, aracım tertemiz oldu. Fiyat/performans açısından harika."</p>
                                <p><small>15 Ekim 2022</small></p>
                                </div>
                            <div class="card-actions">
                                <button class="btn btn-warning">Düzenle</button>
                                <button class="btn btn-danger">Sil</button>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Pro Expertiz Merkezi</div>
                                <div>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ddd;"></i>
                        </div>
                        </div>
                            <div class="card-content">
                                <p>"Expertiz raporları çok detaylı hazırlanıyor, teşekkürler."</p>
                                <p><small>22 Eylül 2022</small></p>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-warning">Düzenle</button>
                                <button class="btn btn-danger">Sil</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Kuponlar -->
                <div id="coupons-section" class="section">
                    <h2 class="section-title">Kuponlarım</h2>
                    <div id="coupons-list">
                        <div class="coupon-card">
                            <h3>%20 İndirim Kuponu</h3>
                            <div class="coupon-code">ARABAMON20</div>
                            <div class="coupon-details">
                                <p><strong>Kategori:</strong> Araç Yıkama</p>
                                <p><strong>Geçerlilik:</strong> 31.12.2023 tarihine kadar</p>
                                <p><strong>Açıklama:</strong> Tüm araç yıkama hizmetlerinde geçerlidir.</p>
                        </div>
                            <button class="btn btn-primary">Kullan</button>
                    </div>
                        <div class="coupon-card">
                            <h3>50 TL İndirim Kuponu</h3>
                            <div class="coupon-code">LASTIK50</div>
                            <div class="coupon-details">
                                <p><strong>Kategori:</strong> Lastik Değişim</p>
                                <p><strong>Geçerlilik:</strong> 15.07.2023 tarihine kadar</p>
                                <p><strong>Açıklama:</strong> 4 lastik değişimi ve balans ayarında geçerlidir.</p>
                </div>
                            <button class="btn btn-primary">Kullan</button>
            </div>
        </div>
    </div>

                <!-- Araçlar -->
                <div id="vehicles-section" class="section">
                    <h2 class="section-title">Araçlarım</h2>
                    <div id="vehicles-list">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Volkswagen Golf</div>
        </div>
                            <div class="card-content">
                                <p><strong>Plaka:</strong> 34 ABC 123</p>
                                <p><strong>Model Yılı:</strong> 2018</p>
                                <p><strong>Motor:</strong> 1.6 TDI</p>
                                <p><strong>Kilometre:</strong> 65.000</p>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-warning">Düzenle</button>
                                <button class="btn btn-danger">Sil</button>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="add-vehicle-btn" style="margin-top: 15px;">Yeni Araç Ekle</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bildirim Alanı -->
    <div id="notification-area"></div>
    
    <script src="/js/auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Kullanıcı adını göster
            const userData = window.Auth?.TokenManager.getUserData() || { name: 'Kullanıcı' };
            const userNameElement = document.getElementById('user-name');
            if (userNameElement) {
                userNameElement.textContent = userData.name;
            }
            
            // Sidebar menü geçişleri
            const menuLinks = document.querySelectorAll('.sidebar-menu a');
            const sections = document.querySelectorAll('.section');
            
            menuLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Aktif menü öğesini güncelle
                    menuLinks.forEach(item => item.classList.remove('active'));
                    this.classList.add('active');
                    
                    // İlgili bölümü göster
                    const targetSection = this.getAttribute('data-section');
                    sections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetSection) {
                            section.classList.add('active');
                    }
                });
            });
            });
            
            // Profil formunu gönderme
            const profileForm = document.getElementById('profile-form');
            if (profileForm) {
                profileForm.addEventListener('submit', function(e) {
                e.preventDefault();
                    
                    // Form verilerini al ve işle
                    const name = document.getElementById('name').value;
                    const email = document.getElementById('email').value;
                    const phone = document.getElementById('phone').value;
                    const currentPassword = document.getElementById('current-password').value;
                    const newPassword = document.getElementById('new-password').value;
                    const confirmPassword = document.getElementById('confirm-password').value;
                    
                    // Şifre kontrolü
                    if (newPassword && newPassword !== confirmPassword) {
                        showNotification('Yeni şifreler eşleşmiyor', 'error');
                return;
            }
            
                    // API'ye gönderilecek veriler
                    const data = {
                        name,
                        email,
                        phone
                    };
                    
                    if (newPassword) {
                        data.currentPassword = currentPassword;
                        data.newPassword = newPassword;
                    }
                    
                    // Demo - API çağrısı yerine başarılı bildirim göster
                    showNotification('Profil başarıyla güncellendi', 'success');
                    
                    // Şifre alanlarını temizle
                    document.getElementById('current-password').value = '';
                    document.getElementById('new-password').value = '';
                    document.getElementById('confirm-password').value = '';
                });
            }
            
            // Yorum yapma butonları
            const reviewButtons = document.querySelectorAll('.review-btn');
            reviewButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const reviewForm = this.parentElement.nextElementSibling;
                    if (reviewForm.style.display === 'none') {
                        reviewForm.style.display = 'block';
                } else {
                        reviewForm.style.display = 'none';
                    }
                });
            });
            
            // Değerlendirme formları
            const reviewForms = document.querySelectorAll('.review-form');
            reviewForms.forEach(form => {
                const submitButton = form.querySelector('button');
                submitButton.addEventListener('click', function() {
                    const rating = form.querySelector('input[name="rating"]:checked')?.value;
                    const comment = form.querySelector('textarea').value;
                    
                    if (!rating) {
                        showNotification('Lütfen bir puan seçin', 'error');
                return;
            }
            
                    if (!comment.trim()) {
                        showNotification('Lütfen bir yorum yazın', 'error');
                return;
            }
            
                    // Demo - API çağrısı yerine başarılı bildirim göster
                    showNotification('Değerlendirmeniz kaydedildi', 'success');
                    
                    // Formu gizle ve temizle
                    form.style.display = 'none';
                    form.querySelector('textarea').value = '';
                    form.querySelectorAll('input[name="rating"]').forEach(input => {
                        input.checked = false;
                    });
                });
            });
            
            // Çıkış butonu
            const logoutBtn = document.getElementById('logout-btn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    window.Auth.logout();
                    window.location.href = '/login.html';
                });
            }
            
            // Araç ekleme butonu tıklama
            const addVehicleBtn = document.getElementById('add-vehicle-btn');
            if (addVehicleBtn) {
                addVehicleBtn.addEventListener('click', function() {
                    openVehicleModal();
                });
            }

            // Demo araç verileri
            let userVehicles = [
                { id: 1, brand: 'Volkswagen', model: 'Golf', plate: '34 ABC 123', year: 2018, engine: '1.6 TDI', mileage: 65000 }
            ];

            // Araçları yükle
            function loadVehicles() {
                const vehiclesList = document.getElementById('vehicles-list');
                if (!vehiclesList) return;

                vehiclesList.innerHTML = '';

                if (userVehicles.length === 0) {
                    vehiclesList.innerHTML = '<div class="empty-state"><i class="fas fa-car"></i><p>Henüz kayıtlı aracınız bulunmuyor.</p></div>';
                    return;
                }

                userVehicles.forEach(vehicle => {
                    const vehicleCard = document.createElement('div');
                    vehicleCard.className = 'card';
                    
                    vehicleCard.innerHTML = `
                        <div class="card-header">
                            <div class="card-title">${vehicle.brand} ${vehicle.model}</div>
                        </div>
                        <div class="card-content">
                            <p><strong>Plaka:</strong> ${vehicle.plate}</p>
                            <p><strong>Model Yılı:</strong> ${vehicle.year}</p>
                            <p><strong>Motor:</strong> ${vehicle.engine}</p>
                            <p><strong>Kilometre:</strong> ${vehicle.mileage.toLocaleString()}</p>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-warning edit-vehicle" data-id="${vehicle.id}">Düzenle</button>
                            <button class="btn btn-danger delete-vehicle" data-id="${vehicle.id}">Sil</button>
                        </div>
                    `;
                    
                    vehiclesList.appendChild(vehicleCard);
                });

                // Araç düzenleme butonlarına tıklama
                const editButtons = document.querySelectorAll('.edit-vehicle');
                editButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const vehicleId = parseInt(this.getAttribute('data-id'));
                        openVehicleModal(vehicleId);
                    });
                });
                
                // Araç silme butonlarına tıklama
                const deleteButtons = document.querySelectorAll('.delete-vehicle');
                deleteButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const vehicleId = parseInt(this.getAttribute('data-id'));
                        deleteVehicle(vehicleId);
                    });
                });
            }

            // Araç ekleme/düzenleme modalını açma
            function openVehicleModal(vehicleId = null) {
                const vehicleModal = document.getElementById('vehicle-modal');
                if (!vehicleModal) {
                    showNotification('Modal yüklenemedi', 'error');
                    return;
                }

                // Form sıfırlama
                document.getElementById('vehicle-form').reset();
                document.getElementById('vehicle-id').value = '';

                // Eğer vehicleId varsa, düzenleme modundayız
                if (vehicleId) {
                    const vehicle = userVehicles.find(v => v.id === vehicleId);
                    if (!vehicle) {
                        showNotification('Araç bulunamadı', 'error');
                        return;
                    }
                    
                    // Form alanlarını doldur
                    document.getElementById('vehicle-id').value = vehicle.id;
                    document.getElementById('vehicle-brand').value = vehicle.brand;
                    document.getElementById('vehicle-model').value = vehicle.model;
                    document.getElementById('vehicle-plate').value = vehicle.plate;
                    document.getElementById('vehicle-year').value = vehicle.year;
                    document.getElementById('vehicle-engine').value = vehicle.engine;
                    document.getElementById('vehicle-mileage').value = vehicle.mileage;
                    
                    document.querySelector('#vehicle-modal .modal-title').textContent = 'Araç Düzenle';
                } else {
                    document.querySelector('#vehicle-modal .modal-title').textContent = 'Yeni Araç Ekle';
                }

                // Modalı göster
                vehicleModal.style.display = 'flex';
            }

            // Araç kaydetme
            function saveVehicle(e) {
                e.preventDefault();
                
                const vehicleId = document.getElementById('vehicle-id').value;
                const isEdit = vehicleId !== '';
                
                const vehicleData = {
                    brand: document.getElementById('vehicle-brand').value,
                    model: document.getElementById('vehicle-model').value,
                    plate: document.getElementById('vehicle-plate').value,
                    year: parseInt(document.getElementById('vehicle-year').value),
                    engine: document.getElementById('vehicle-engine').value,
                    mileage: parseInt(document.getElementById('vehicle-mileage').value)
                };
                
                // Validasyon
                if (!vehicleData.brand || !vehicleData.model || !vehicleData.plate) {
                    showNotification('Lütfen gerekli alanları doldurun', 'error');
                    return;
                }
                
                if (isNaN(vehicleData.year) || vehicleData.year < 1900 || vehicleData.year > new Date().getFullYear() + 1) {
                    showNotification('Lütfen geçerli bir yıl girin', 'error');
                    return;
                }
                
                if (isNaN(vehicleData.mileage) || vehicleData.mileage < 0) {
                    showNotification('Lütfen geçerli bir kilometre değeri girin', 'error');
                    return;
                }
                
                if (isEdit) {
                    // Araç düzenleme
                    const index = userVehicles.findIndex(v => v.id === parseInt(vehicleId));
                    if (index !== -1) {
                        userVehicles[index] = { ...userVehicles[index], ...vehicleData };
                        showNotification(`${vehicleData.brand} ${vehicleData.model} aracı güncellendi`, 'success');
                    }
                } else {
                    // Yeni araç ekleme
                    const newId = userVehicles.length > 0 
                        ? Math.max(...userVehicles.map(v => v.id)) + 1 
                        : 1;
                    
                    userVehicles.push({
                        id: newId,
                        ...vehicleData
                    });
                    
                    showNotification(`${vehicleData.brand} ${vehicleData.model} aracı eklendi`, 'success');
                }
                
                // Modalı kapat
                document.getElementById('vehicle-modal').style.display = 'none';
                
                // Araçları yeniden yükle
                loadVehicles();
            }

            // Araç silme
            function deleteVehicle(vehicleId) {
                const vehicle = userVehicles.find(v => v.id === vehicleId);
                if (!vehicle) {
                    showNotification('Araç bulunamadı', 'error');
                    return;
                }
                
                if (confirm(`${vehicle.brand} ${vehicle.model} (${vehicle.plate}) aracını silmek istediğinize emin misiniz?`)) {
                    userVehicles = userVehicles.filter(v => v.id !== vehicleId);
                    showNotification(`${vehicle.brand} ${vehicle.model} aracı silindi`, 'success');
                    loadVehicles();
                }
            }

            // Araç formunu kaydetme
            const vehicleForm = document.getElementById('vehicle-form');
            if (vehicleForm) {
                vehicleForm.addEventListener('submit', saveVehicle);
            }

            // Modal kapatma butonları
            document.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    const modalId = this.getAttribute('data-modal');
                    if (modalId) {
                        document.getElementById(modalId).style.display = 'none';
                    }
                });
            });

            // Bildirimleri gösterme
            window.showNotification = function(message, type = 'info') {
                const notificationArea = document.getElementById('notification-area');
                if (!notificationArea) return;
                
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.textContent = message;
                
                notificationArea.appendChild(notification);
                
                // 3 saniye sonra bildirimi kaldır
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            };
            
            // Aktif randevuları yükleme
            function loadAppointments() {
                // Demo için boş olarak bırakıldı - Gerçek API entegrasyonunda doldurulacak
            }
            
            // Geçmiş randevuları yükleme
            function loadPastAppointments() {
                // Demo için boş olarak bırakıldı - Gerçek API entegrasyonunda doldurulacak
            }
            
            // Yorumları yükleme
            function loadReviews() {
                // Demo için boş olarak bırakıldı - Gerçek API entegrasyonunda doldurulacak
            }
            
            // Kuponları yükleme
            function loadCoupons() {
                // Demo için boş olarak bırakıldı - Gerçek API entegrasyonunda doldurulacak
            }
            
            // İlk yükleme işlemleri
            loadVehicles();
            loadAppointments();
            loadPastAppointments();
            loadReviews();
            loadCoupons();
        });
    </script>
    
    <!-- Araç Ekleme/Düzenleme Modal -->
    <div class="modal" id="vehicle-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div class="modal-content" style="background-color: white; width: 80%; max-width: 500px; padding: 0; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
            <div class="modal-header" style="background-color: #0066cc; color: white; padding: 15px 20px; font-size: 18px; font-weight: bold; border-top-left-radius: 8px; border-top-right-radius: 8px;">
                <span class="modal-title">Yeni Araç Ekle</span>
                <button class="close-modal" data-modal="vehicle-modal" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer; float: right;">&times;</button>
                </div>
            <div class="modal-body" style="padding: 20px;">
                <form id="vehicle-form">
                    <input type="hidden" id="vehicle-id">
                    
                    <div class="form-group">
                        <label for="vehicle-brand">Marka</label>
                        <input type="text" id="vehicle-brand" required>
                </div>

                        <div class="form-group">
                        <label for="vehicle-model">Model</label>
                        <input type="text" id="vehicle-model" required>
                        </div>
                    
                        <div class="form-group">
                        <label for="vehicle-plate">Plaka</label>
                        <input type="text" id="vehicle-plate" required>
                        </div>
                    
                        <div class="form-group">
                        <label for="vehicle-year">Model Yılı</label>
                        <input type="number" id="vehicle-year" min="1900" max="2099" required>
                </div>

                        <div class="form-group">
                        <label for="vehicle-engine">Motor</label>
                        <input type="text" id="vehicle-engine">
                        </div>
                    
                        <div class="form-group">
                        <label for="vehicle-mileage">Kilometre</label>
                        <input type="number" id="vehicle-mileage" min="0" required>
                        </div>
                    </form>
                </div>
            <div class="modal-footer" style="padding: 15px 20px; text-align: right; border-top: 1px solid #ddd;">
                <button type="button" class="btn btn-danger close-modal" data-modal="vehicle-modal">İptal</button>
                <button type="submit" class="btn btn-success" form="vehicle-form">Kaydet</button>
                        </div>
                    </div>
                </div>
</body>
</html> 