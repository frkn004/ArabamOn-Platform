<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İşletme Paneli - Arabamon</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 15px 0;
            margin-bottom: 30px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #0066cc;
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-name {
            margin-right: 15px;
        }
        
        .logout-btn {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .sidebar {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .sidebar-menu {
            list-style: none;
        }
        
        .sidebar-menu li {
            margin-bottom: 10px;
        }
        
        .sidebar-menu a {
            display: block;
            padding: 10px;
            color: #333;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background-color: #f0f0f0;
        }
        
        .sidebar-menu a i {
            margin-right: 10px;
            color: #0066cc;
        }
        
        .main-content {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .section-title {
            font-size: 20px;
            margin-bottom: 20px;
            color: #0066cc;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .overview-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 20px;
            display: flex;
            flex-direction: column;
            border: 1px solid #eee;
        }
        
        .overview-card {
            text-align: center;
        }
        
        .overview-card .card-icon {
            font-size: 36px;
            margin-bottom: 10px;
            color: #0066cc;
        }
        
        .overview-card .card-title {
            font-size: 16px;
            font-weight: normal;
            color: #666;
            margin-bottom: 5px;
        }
        
        .overview-card .card-value {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .card-title {
            font-weight: bold;
        }
        
        .card-status {
            font-size: 14px;
            padding: 3px 8px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .status-pending {
            background-color: #ff9800;
            color: white;
        }
        
        .status-confirmed {
            background-color: #4caf50;
            color: white;
        }
        
        .status-cancelled {
            background-color: #f44336;
            color: white;
        }
        
        .status-completed {
            background-color: #2196f3;
            color: white;
        }
        
        .card-content {
            margin-bottom: 10px;
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
            margin-top: auto;
        }
        
        .btn {
            display: inline-block;
            padding: 8px 15px;
            background-color: #0066cc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .btn-primary {
            background-color: #0066cc;
        }
        
        .btn-success {
            background-color: #4caf50;
        }
        
        .btn-danger {
            background-color: #f44336;
        }
        
        .btn-warning {
            background-color: #ff9800;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        /* Bildirim Stilleri */
        #notification-area {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            width: 300px;
        }
        
        .notification {
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            margin-bottom: 10px;
            animation: slideIn 0.3s ease;
        }
        
        .notification.success {
            border-left: 5px solid #4caf50;
        }
        
        .notification.error {
            border-left: 5px solid #f44336;
        }
        
        .notification.info {
            border-left: 5px solid #0066cc;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Responsive Styles */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
        .sidebar {
            margin-bottom: 20px;
        }
        
        .sidebar-menu {
            display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .sidebar-menu li {
            margin-bottom: 0;
            }
        }
    </style>
</head>
<body>
        <header>
            <div class="header-content">
                <div class="logo">ArabamON İşletme Paneli</div>
                <div class="user-info">
                    <div class="user-name">Hoşgeldiniz, <span id="business-owner-name">İşletme Sahibi</span></div>
                    <button class="logout-btn" id="logout-btn">Çıkış Yap</button>
                </div>
            </div>
        </header>
        
        <div class="container">
            <div class="dashboard">
            <div class="sidebar">
                <ul class="sidebar-menu">
                    <li><a href="#overview" class="active" data-section="overview-section"><i class="fas fa-tachometer-alt"></i> Genel Bakış</a></li>
                    <li><a href="#appointments" data-section="appointments-section"><i class="fas fa-calendar-alt"></i> Randevular</a></li>
                    <li><a href="#services" data-section="services-section"><i class="fas fa-tools"></i> Hizmetler</a></li>
                    <li><a href="#reviews" data-section="reviews-section"><i class="fas fa-star"></i> Yorumlar</a></li>
                    <li><a href="#settings" data-section="settings-section"><i class="fas fa-cog"></i> Ayarlar</a></li>
                </ul>
                </div>
            
            <div class="main-content">
                <!-- Genel Bakış -->
                <div id="overview-section" class="section active">
                    <h2 class="section-title">Genel Bakış</h2>
                    
                    <div class="overview-cards">
                        <div class="card overview-card">
                            <div class="card-icon"><i class="fas fa-calendar-check"></i></div>
                            <div class="card-title">Bugünkü Randevular</div>
                            <div class="card-value">3</div>
                </div>
                        <div class="card overview-card">
                            <div class="card-icon"><i class="fas fa-clock"></i></div>
                            <div class="card-title">Bekleyen Randevular</div>
                            <div class="card-value">5</div>
                </div>
                        <div class="card overview-card">
                            <div class="card-icon"><i class="fas fa-star"></i></div>
                            <div class="card-title">Ortalama Puan</div>
                            <div class="card-value">4.6</div>
                        </div>
                        <div class="card overview-card">
                            <div class="card-icon"><i class="fas fa-comment"></i></div>
                            <div class="card-title">Toplam Yorum</div>
                            <div class="card-value">28</div>
                </div>
            </div>
            
                    <h3 style="margin-bottom: 15px; color: #333;">Bugünkü Randevular</h3>
                    <div id="today-appointments">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Ahmet Yılmaz</div>
                                <div class="card-status status-confirmed">Onaylandı</div>
                </div>
                            <div class="card-content">
                                <p><strong>Hizmet:</strong> Premium Yıkama</p>
                                <p><strong>Saat:</strong> 14:30</p>
                                <p><strong>Araç:</strong> Volkswagen Golf (34 ABC 123)</p>
                                <p><strong>Notlar:</strong> Araç içi detaylı temizlik isteniyor.</p>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary">Detaylar</button>
                                <button class="btn btn-success">Tamamlandı</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Randevular -->
                <div id="appointments-section" class="section">
                    <h2 class="section-title">Randevular</h2>
                    
                    <div class="tabs" style="margin-bottom: 20px;">
                        <button class="btn appointment-tab active" data-target="pending-appointments">Bekleyen (5)</button>
                        <button class="btn appointment-tab" data-target="confirmed-appointments">Onaylanan (8)</button>
                        <button class="btn appointment-tab" data-target="completed-appointments">Tamamlanan (15)</button>
                        <button class="btn appointment-tab" data-target="cancelled-appointments">İptal Edilen (2)</button>
                        </div>
                        
                    <div id="pending-appointments" class="appointment-list active">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Ayşe Demir</div>
                                <div class="card-status status-pending">Beklemede</div>
                            </div>
                            <div class="card-content">
                                <p><strong>Hizmet:</strong> Standart Yıkama</p>
                                <p><strong>Tarih/Saat:</strong> 15 Nisan 2023, 10:00</p>
                                <p><strong>Araç:</strong> Renault Clio (34 DEF 456)</p>
                                <p><strong>İletişim:</strong> 0532 123 45 67</p>
                                <p><strong>Notlar:</strong> Hızlı servis rica ediyorum.</p>
                        </div>
                            <div class="card-actions">
                                <button class="btn btn-success confirm-appointment" data-id="1">Onayla</button>
                                <button class="btn btn-danger reject-appointment" data-id="1">Reddet</button>
                                <button class="btn btn-warning reschedule-appointment" data-id="1">Yeniden Planla</button>
                </div>
            </div>
            
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Mehmet Kaya</div>
                                <div class="card-status status-pending">Beklemede</div>
                </div>
                            <div class="card-content">
                                <p><strong>Hizmet:</strong> Detaylı Ekspertiz</p>
                                <p><strong>Tarih/Saat:</strong> 16 Nisan 2023, 14:00</p>
                                <p><strong>Araç:</strong> BMW 320i (34 GHI 789)</p>
                                <p><strong>İletişim:</strong> 0533 456 78 90</p>
                                <p><strong>Notlar:</strong> İkinci el alım için detaylı rapor gerekiyor.</p>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-success confirm-appointment" data-id="2">Onayla</button>
                                <button class="btn btn-danger reject-appointment" data-id="2">Reddet</button>
                                <button class="btn btn-warning reschedule-appointment" data-id="2">Yeniden Planla</button>
                            </div>
                </div>
            </div>
            
                    <div id="confirmed-appointments" class="appointment-list" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Ahmet Yılmaz</div>
                                <div class="card-status status-confirmed">Onaylandı</div>
                </div>
                            <div class="card-content">
                                <p><strong>Hizmet:</strong> Premium Yıkama</p>
                                <p><strong>Tarih/Saat:</strong> 15 Nisan 2023, 14:30</p>
                                <p><strong>Araç:</strong> Volkswagen Golf (34 ABC 123)</p>
                                <p><strong>İletişim:</strong> 0535 111 22 33</p>
                                <p><strong>Notlar:</strong> Araç içi detaylı temizlik isteniyor.</p>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-success complete-appointment" data-id="3">Tamamlandı</button>
                                <button class="btn btn-danger cancel-appointment" data-id="3">İptal Et</button>
                            </div>
                </div>
            </div>
            
                    <div id="completed-appointments" class="appointment-list" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Zeynep Şahin</div>
                                <div class="card-status status-completed">Tamamlandı</div>
                </div>
                            <div class="card-content">
                                <p><strong>Hizmet:</strong> Lastik Değişimi (4 Adet)</p>
                                <p><strong>Tarih/Saat:</strong> 12 Nisan 2023, 11:00</p>
                                <p><strong>Araç:</strong> Toyota Corolla (34 JKL 012)</p>
                                <p><strong>Ücret:</strong> 1,200 ₺</p>
                                <p><strong>Tamamlanma:</strong> 12 Nisan 2023, 12:15</p>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary send-reminder" data-id="4">Değerlendirme Hatırlat</button>
                            </div>
                </div>
            </div>
            
                    <div id="cancelled-appointments" class="appointment-list" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Ali Tekin</div>
                                <div class="card-status status-cancelled">İptal Edildi</div>
                </div>
                            <div class="card-content">
                                <p><strong>Hizmet:</strong> Standart Ekspertiz</p>
                                <p><strong>Tarih/Saat:</strong> 10 Nisan 2023, 15:00</p>
                                <p><strong>Araç:</strong> Fiat Egea (34 MNO 345)</p>
                                <p><strong>İptal Sebebi:</strong> Müşteri tarafından iptal edildi</p>
                                <p><strong>İptal Tarihi:</strong> 9 Nisan 2023, 18:45</p>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary rechedule-cancelled" data-id="5">Yeniden Randevu</button>
                </div>
            </div>
        </div>
    </div>

                <!-- Hizmetler -->
                <div id="services-section" class="section">
                    <h2 class="section-title">Hizmetlerim</h2>
                    
                    <button id="add-service-btn" class="btn btn-success" style="margin-bottom: 20px;">Yeni Hizmet Ekle</button>
                    
                    <div id="services-list">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Premium Yıkama</div>
                                <div>250 ₺</div>
            </div>
                            <div class="card-content">
                                <p>Detaylı dış yıkama, iç temizlik, cilalama ve koruma.</p>
                                <p><strong>Süre:</strong> 60 dakika</p>
                    </div>
                            <div class="card-actions">
                                <button class="btn btn-warning edit-service" data-id="1">Düzenle</button>
                                <button class="btn btn-danger delete-service" data-id="1">Sil</button>
                    </div>
                    </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Standart Yıkama</div>
                                <div>120 ₺</div>
                    </div>
                            <div class="card-content">
                                <p>Dış yıkama, iç süpürme ve kurutma.</p>
                                <p><strong>Süre:</strong> 30 dakika</p>
                    </div>
                            <div class="card-actions">
                                <button class="btn btn-warning edit-service" data-id="2">Düzenle</button>
                                <button class="btn btn-danger delete-service" data-id="2">Sil</button>
                            </div>
            </div>
        </div>
    </div>

                <!-- Yorumlar -->
                <div id="reviews-section" class="section">
                    <h2 class="section-title">Yorumlar ve Değerlendirmeler</h2>
                    
                    <div id="reviews-list">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">Ahmet Yılmaz</div>
                                    <div style="color: #777; font-size: 14px;">15 Nisan 2023</div>
            </div>
                                <div>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                </div>
                </div>
                            <div class="card-content">
                                <p>"Çok memnun kaldım, aracım tertemiz oldu. Fiyat/performans açısından harika."</p>
                                <p><strong>Hizmet:</strong> Premium Yıkama</p>
            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary reply-review" data-id="1">Yanıtla</button>
        </div>
    </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">Zeynep Şahin</div>
                                    <div style="color: #777; font-size: 14px;">12 Nisan 2023</div>
            </div>
                                <div>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ffc107;"></i>
                                    <i class="fas fa-star" style="color: #ddd;"></i>
                    </div>
                    </div>
                            <div class="card-content">
                                <p>"Lastik değişimi çok hızlı yapıldı, memnun kaldım. Sadece bekleme alanı biraz daha konforlu olabilir."</p>
                                <p><strong>Hizmet:</strong> Lastik Değişimi (4 Adet)</p>
                    </div>
                            <div class="card-actions">
                                <button class="btn btn-primary reply-review" data-id="2">Yanıtla</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ayarlar -->
                <div id="settings-section" class="section">
                    <h2 class="section-title">İşletme Ayarları</h2>
                    
                    <form id="settings-form">
                    <div class="form-group">
                            <label for="business-name">İşletme Adı</label>
                            <input type="text" id="business-name" value="Kristal Oto Yıkama">
                    </div>
                        
                    <div class="form-group">
                            <label for="business-description">Açıklama</label>
                            <textarea id="business-description">Premium araç yıkama ve detaylı iç temizlik hizmetleri sunuyoruz.</textarea>
                    </div>
                        
                    <div class="form-group">
                            <label for="business-phone">Telefon</label>
                            <input type="text" id="business-phone" value="0216 123 45 67">
                    </div>
                        
                    <div class="form-group">
                            <label for="business-email">E-posta</label>
                            <input type="email" id="business-email" value="info@kristalyikama.com">
                    </div>
                        
                    <div class="form-group">
                            <label for="business-address">Adres</label>
                            <textarea id="business-address">Atatürk Cad. No:123, Kadıköy/İstanbul</textarea>
                    </div>
                        
                    <div class="form-group">
                            <label>Çalışma Saatleri</label>
                            <div class="working-hours-container" style="border: 1px solid #ddd; padding: 15px; border-radius: 4px;">
                                <div class="day-row" style="display: flex; margin-bottom: 10px; align-items: center;">
                                    <div style="width: 100px; font-weight: bold;">Pazartesi</div>
                                    <div style="display: flex; align-items: center;">
                                        <label style="margin-right: 10px;">
                                            <input type="checkbox" id="monday-status" checked> Açık
                                        </label>
                                        <input type="time" id="monday-open" value="09:00" style="margin-right: 10px;">
                                        <span style="margin-right: 10px;">-</span>
                                        <input type="time" id="monday-close" value="18:00">
                            </div>
                        </div>
                                <!-- Diğer günler burada... -->
                    </div>
                                </div>
                        
                        <button type="submit" class="btn btn-primary">Ayarları Kaydet</button>
                    </form>
                            </div>
                                </div>
                            </div>
                                </div>
    
    <!-- Bildirim Alanı -->
    <div id="notification-area"></div>
    
    <!-- Yeniden Planlama Modal -->
    <div class="modal" id="reschedule-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div class="modal-content" style="background-color: white; width: 80%; max-width: 500px; padding: 0; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
            <div class="modal-header" style="background-color: #0066cc; color: white; padding: 15px 20px; font-size: 18px; font-weight: bold; border-top-left-radius: 8px; border-top-right-radius: 8px;">
                <span>Randevu Yeniden Planlama</span>
                <button class="close-modal" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer; float: right;">&times;</button>
                            </div>
            <div class="modal-body" style="padding: 20px;">
                <form id="reschedule-form">
                    <input type="hidden" id="appointment-id">
                    
                    <div class="form-group">
                        <label for="appointment-date">Yeni Tarih</label>
                        <input type="date" id="appointment-date" required>
                                </div>
                    
                    <div class="form-group">
                        <label for="appointment-time">Yeni Saat</label>
                        <input type="time" id="appointment-time" required>
                            </div>
                    
                    <div class="form-group">
                        <label for="reschedule-reason">Yeniden Planlama Sebebi</label>
                        <textarea id="reschedule-reason" placeholder="Müşteriye iletilecek yeniden planlama sebebi..."></textarea>
                                </div>
                </form>
                            </div>
            <div class="modal-footer" style="padding: 15px 20px; text-align: right; border-top: 1px solid #ddd;">
                <button type="button" class="btn btn-danger close-modal">İptal</button>
                <button type="submit" class="btn btn-success" form="reschedule-form">Randevuyu Yeniden Planla</button>
                                </div>
                            </div>
                                </div>
    
    <!-- Hizmet Ekleme/Düzenleme Modal -->
    <div class="modal" id="service-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div class="modal-content" style="background-color: white; width: 80%; max-width: 500px; padding: 0; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
            <div class="modal-header" style="background-color: #0066cc; color: white; padding: 15px 20px; font-size: 18px; font-weight: bold; border-top-left-radius: 8px; border-top-right-radius: 8px;">
                <span>Hizmet Ekle/Düzenle</span>
                <button class="close-modal" data-modal="service-modal" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer; float: right;">&times;</button>
                            </div>
            <div class="modal-body" style="padding: 20px;">
                <form id="service-form">
                    <input type="hidden" id="service-id">
                    
                    <div class="form-group">
                        <label for="service-name">Hizmet Adı</label>
                        <input type="text" id="service-name" required>
                        </div>
                    
                    <div class="form-group">
                        <label for="service-description">Açıklama</label>
                        <textarea id="service-description" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="service-price">Fiyat (₺)</label>
                        <input type="number" id="service-price" min="0" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="service-duration">Süre (Dakika)</label>
                        <input type="number" id="service-duration" min="1" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="service-status">Durum</label>
                        <select id="service-status">
                            <option value="true">Aktif</option>
                            <option value="false">Pasif</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="padding: 15px 20px; text-align: right; border-top: 1px solid #ddd;">
                <button type="button" class="btn btn-danger close-modal" data-modal="service-modal">İptal</button>
                <button type="submit" class="btn btn-success" form="service-form">Kaydet</button>
            </div>
        </div>
    </div>

    <script src="/js/auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Kullanıcı adını göster
            const userData = window.Auth?.TokenManager.getUserData() || { name: 'İşletme Sahibi' };
            const ownerNameElement = document.getElementById('business-owner-name');
            if (ownerNameElement) {
                ownerNameElement.textContent = userData.name;
            }
            
            // Sidebar menü geçişleri
            const menuLinks = document.querySelectorAll('.sidebar-menu a');
            const sections = document.querySelectorAll('.section');
            
            menuLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Aktif menü öğesini güncelle
                    menuLinks.forEach(item => item.classList.remove('active'));
                    this.classList.add('active');
                    
                    // İlgili bölümü göster
                    const targetSection = this.getAttribute('data-section');
                    sections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetSection) {
                            section.classList.add('active');
                        }
                    });
                });
            });
            
            // Randevu sekmelerini işle
            const appointmentTabs = document.querySelectorAll('.appointment-tab');
            const appointmentLists = document.querySelectorAll('.appointment-list');
            
            appointmentTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Aktif sekmeyi güncelle
                    appointmentTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // İlgili listeyi göster
                    const targetList = this.getAttribute('data-target');
                    appointmentLists.forEach(list => {
                        list.style.display = 'none';
                        if (list.id === targetList) {
                            list.style.display = 'block';
                        }
                    });
                });
            });
            
            // Randevu onaylama
            const confirmButtons = document.querySelectorAll('.confirm-appointment');
            confirmButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const appointmentId = this.getAttribute('data-id');
                    confirmAppointment(appointmentId);
                });
            });
            
            // Randevu reddetme
            const rejectButtons = document.querySelectorAll('.reject-appointment');
            rejectButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const appointmentId = this.getAttribute('data-id');
                    rejectAppointment(appointmentId);
                });
            });
            
            // Randevu yeniden planlama
            const rescheduleButtons = document.querySelectorAll('.reschedule-appointment');
            rescheduleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const appointmentId = this.getAttribute('data-id');
                    openRescheduleModal(appointmentId);
                });
            });
            
            // Modal kapatma
            const closeModalButtons = document.querySelectorAll('.close-modal');
            closeModalButtons.forEach(button => {
                button.addEventListener('click', function() {
                    document.getElementById('reschedule-modal').style.display = 'none';
                });
            });
            
            // Yeniden planlama formu
            const rescheduleForm = document.getElementById('reschedule-form');
            if (rescheduleForm) {
                rescheduleForm.addEventListener('submit', function(e) {
                e.preventDefault();
                    const appointmentId = document.getElementById('appointment-id').value;
                    const date = document.getElementById('appointment-date').value;
                    const time = document.getElementById('appointment-time').value;
                    const reason = document.getElementById('reschedule-reason').value;
                    
                    rescheduleAppointment(appointmentId, date, time, reason);
                });
            }
            
            // Ayarları kaydet
            const settingsForm = document.getElementById('settings-form');
            if (settingsForm) {
                settingsForm.addEventListener('submit', function(e) {
                e.preventDefault();
                    saveSettings();
                });
            }
            
            // Çıkış butonu
            const logoutBtn = document.getElementById('logout-btn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    window.Auth.logout();
                window.location.href = '/login.html';
            });
            }
        });
        
        // Randevu onaylama
        function confirmAppointment(appointmentId) {
            try {
                // Demo - API çağrısı yerine başarılı bildirim göster
                showNotification(`#${appointmentId} numaralı randevu başarıyla onaylandı`, 'success');
                
                // UI güncelleme (gerçek uygulamada sayfa yeniden yüklenebilir)
                const appointmentCard = document.querySelector(`.confirm-appointment[data-id="${appointmentId}"]`).closest('.card');
                if (appointmentCard) {
                    // Statusu güncelle
                    const statusEl = appointmentCard.querySelector('.card-status');
                    if (statusEl) {
                        statusEl.classList.remove('status-pending');
                        statusEl.classList.add('status-confirmed');
                        statusEl.textContent = 'Onaylandı';
                    }
                    
                    // Butonları güncelle
                    const actionsEl = appointmentCard.querySelector('.card-actions');
                    if (actionsEl) {
                        actionsEl.innerHTML = `
                            <button class="btn btn-success complete-appointment" data-id="${appointmentId}">Tamamlandı</button>
                            <button class="btn btn-danger cancel-appointment" data-id="${appointmentId}">İptal Et</button>
                        `;
                    }
                }
            } catch (error) {
                console.error('Randevu onaylanırken hata:', error);
                showNotification('Randevu onaylanırken hata oluştu', 'error');
            }
        }
        
        // Randevu reddetme
        function rejectAppointment(appointmentId) {
            try {
                const reason = prompt('Reddetme sebebini yazınız:');
                if (reason === null) return; // İptal edildi
                
                // Demo - API çağrısı yerine başarılı bildirim göster
                showNotification(`#${appointmentId} numaralı randevu reddedildi`, 'success');
                
                // UI güncelleme (gerçek uygulamada sayfa yeniden yüklenebilir)
                const appointmentCard = document.querySelector(`.reject-appointment[data-id="${appointmentId}"]`).closest('.card');
                if (appointmentCard) {
                    // Statusu güncelle
                    const statusEl = appointmentCard.querySelector('.card-status');
                    if (statusEl) {
                        statusEl.classList.remove('status-pending');
                        statusEl.classList.add('status-cancelled');
                        statusEl.textContent = 'Reddedildi';
                    }
                    
                    // Butonları güncelle
                    const actionsEl = appointmentCard.querySelector('.card-actions');
                    if (actionsEl) {
                        actionsEl.innerHTML = `
                            <button class="btn btn-primary rechedule-cancelled" data-id="${appointmentId}">Yeniden Randevu</button>
                        `;
                    }
                }
            } catch (error) {
                console.error('Randevu reddedilirken hata:', error);
                showNotification('Randevu reddedilirken hata oluştu', 'error');
            }
        }
        
        // Yeniden planlama modalını aç
        function openRescheduleModal(appointmentId) {
            const modal = document.getElementById('reschedule-modal');
            if (!modal) return;
            
            // Tarih alanını en az bugünden başlayacak şekilde ayarla
            const dateInput = document.getElementById('appointment-date');
            if (dateInput) {
                const today = new Date();
                const dateStr = today.toISOString().split('T')[0];
                dateInput.min = dateStr;
                dateInput.value = dateStr;
            }
            
            // Varsayılan saat ayarla
            const timeInput = document.getElementById('appointment-time');
            if (timeInput) {
                timeInput.value = '10:00';
            }
            
            // Randevu ID'sini form'a ekle
            document.getElementById('appointment-id').value = appointmentId;
            
            // Modalı göster
            modal.style.display = 'flex';
        }
        
        // Randevu yeniden planlama
        function rescheduleAppointment(appointmentId, date, time, reason) {
            try {
                // Demo - API çağrısı yerine başarılı bildirim göster
                showNotification(`#${appointmentId} numaralı randevu yeniden planlandı: ${date} ${time}`, 'success');
                
                // UI güncelleme (gerçek uygulamada sayfa yeniden yüklenebilir)
                const appointmentCard = document.querySelector(`.reschedule-appointment[data-id="${appointmentId}"]`)?.closest('.card');
                if (appointmentCard) {
                    // Tarihi güncelle
                    const dateEl = appointmentCard.querySelector('.card-content p:nth-child(2)');
                    if (dateEl) {
                        const dateObj = new Date(date);
                        const formattedDate = dateObj.toLocaleDateString('tr-TR', { day: 'numeric', month: 'long', year: 'numeric' });
                        dateEl.innerHTML = `<strong>Tarih/Saat:</strong> ${formattedDate}, ${time}`;
                    }
                }
                
                // Modalı kapat
                document.getElementById('reschedule-modal').style.display = 'none';
            } catch (error) {
                console.error('Randevu yeniden planlanırken hata:', error);
                showNotification('Randevu yeniden planlanırken hata oluştu', 'error');
            }
        }
        
        // İşletme ayarlarını kaydet
        function saveSettings() {
            try {
                // Demo - API çağrısı yerine başarılı bildirim göster
                showNotification('İşletme ayarları başarıyla güncellendi', 'success');
            } catch (error) {
                console.error('Ayarlar kaydedilirken hata:', error);
                showNotification('Ayarlar kaydedilirken hata oluştu', 'error');
            }
        }
        
        // Bildirim gösterme fonksiyonu
        function showNotification(message, type = 'info') {
            let notificationArea = document.getElementById('notification-area');
            if (!notificationArea) {
                notificationArea = document.createElement('div');
                notificationArea.id = 'notification-area';
                document.body.appendChild(notificationArea);
            }
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            notificationArea.appendChild(notification);
            
            // 5 saniye sonra bildirim kaybolsun
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }
    </script>
    
    <script>
        // İşletme hizmetleri yönetimi
        document.addEventListener('DOMContentLoaded', function() {
            // Demo hizmet verileri
            let businessServices = [
                { id: 1, name: 'Premium Yıkama', description: 'Detaylı dış yıkama, iç temizlik, cilalama ve koruma.', price: 250, duration: 60, isActive: true },
                { id: 2, name: 'Standart Yıkama', description: 'Dış yıkama, iç süpürme ve kurutma.', price: 120, duration: 30, isActive: true }
            ];
            
            // Hizmetleri listele
            function loadServices() {
                const servicesList = document.getElementById('services-list');
                if (!servicesList) return;
                
                servicesList.innerHTML = '';
                
                if (businessServices.length === 0) {
                    servicesList.innerHTML = '<div class="alert" style="padding: 15px; background-color: #f8f9fa; color: #666; text-align: center; border-radius: 4px;">Henüz eklenmiş hizmet bulunmuyor.</div>';
                        return;
                    }
                    
                businessServices.forEach(service => {
                    const serviceCard = document.createElement('div');
                    serviceCard.className = 'card';
                    
                    serviceCard.innerHTML = `
                        <div class="card-header">
                            <div class="card-title">${service.name}</div>
                            <div>${service.price} ₺</div>
                        </div>
                        <div class="card-content">
                            <p>${service.description || ''}</p>
                            <p><strong>Süre:</strong> ${service.duration} dakika</p>
                            <p><strong>Durum:</strong> <span class="status ${service.isActive ? 'active' : 'inactive'}">${service.isActive ? 'Aktif' : 'Pasif'}</span></p>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-warning edit-service" data-id="${service.id}">Düzenle</button>
                            <button class="btn btn-danger delete-service" data-id="${service.id}">Sil</button>
                        </div>
                    `;
                    
                    servicesList.appendChild(serviceCard);
                });
                
                // Hizmet düzenleme butonlarına tıklama
                const editButtons = document.querySelectorAll('.edit-service');
                editButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const serviceId = parseInt(this.getAttribute('data-id'));
                        openServiceModal(serviceId);
                });
            });
            
            // Hizmet silme butonlarına tıklama
                const deleteButtons = document.querySelectorAll('.delete-service');
                deleteButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const serviceId = parseInt(this.getAttribute('data-id'));
                        deleteService(serviceId);
                });
            });
        }
        
            // Hizmet ekleme/düzenleme modalını aç
            function openServiceModal(serviceId = null) {
                const modal = document.getElementById('service-modal');
                const form = document.getElementById('service-form');
                
                if (!modal || !form) return;
                
                // Formu sıfırla
                form.reset();
                
                // Eğer serviceId varsa, düzenleme modundayız
                if (serviceId) {
                    const service = businessServices.find(s => s.id === serviceId);
                    if (!service) {
                        showNotification('Hizmet bulunamadı', 'error');
                        return;
                    }
                    
                    // Form alanlarını doldur
                    document.getElementById('service-id').value = service.id;
                    document.getElementById('service-name').value = service.name;
                    document.getElementById('service-description').value = service.description || '';
                    document.getElementById('service-price').value = service.price;
                    document.getElementById('service-duration').value = service.duration;
                    document.getElementById('service-status').value = service.isActive.toString();
                    } else {
                    // Yeni hizmet ekleme modu
                    document.getElementById('service-id').value = '';
                    }
                    
                    // Modalı göster
                modal.style.display = 'flex';
            }
            
            // Hizmet kaydet
            function saveService(e) {
                e.preventDefault();
                
            const serviceId = document.getElementById('service-id').value;
                const isEdit = serviceId !== '';
            
                const serviceData = {
                name: document.getElementById('service-name').value,
                description: document.getElementById('service-description').value,
                price: parseFloat(document.getElementById('service-price').value),
                    duration: parseInt(document.getElementById('service-duration').value),
                    isActive: document.getElementById('service-status').value === 'true'
                };
                
                // Validasyon
                if (!serviceData.name || !serviceData.price || !serviceData.duration) {
                    showNotification('Lütfen gerekli alanları doldurun', 'error');
                    return;
                }
                
                if (isEdit) {
                    // Hizmet düzenleme
                    const index = businessServices.findIndex(s => s.id === parseInt(serviceId));
                    if (index !== -1) {
                        businessServices[index] = { ...businessServices[index], ...serviceData };
                        showNotification(`"${serviceData.name}" hizmeti güncellendi`, 'success');
                    }
                } else {
                    // Yeni hizmet ekleme
                    const newId = businessServices.length > 0 
                        ? Math.max(...businessServices.map(s => s.id)) + 1 
                        : 1;
                    
                    businessServices.push({
                        id: newId,
                        ...serviceData
                    });
                    
                    showNotification(`"${serviceData.name}" hizmeti eklendi`, 'success');
                }
                
                // Modalı kapat
                document.getElementById('service-modal').style.display = 'none';
                
                // Hizmetleri yeniden yükle
                loadServices();
            }
            
            // Hizmet sil
            function deleteService(serviceId) {
                const service = businessServices.find(s => s.id === serviceId);
                if (!service) {
                    showNotification('Hizmet bulunamadı', 'error');
                    return;
                }
                
                if (confirm(`"${service.name}" hizmetini silmek istediğinize emin misiniz?`)) {
                    businessServices = businessServices.filter(s => s.id !== serviceId);
                    showNotification(`"${service.name}" hizmeti silindi`, 'success');
                    loadServices();
                }
            }
            
            // Yeni hizmet ekleme butonuna tıklama
            const addServiceBtn = document.getElementById('add-service-btn');
            if (addServiceBtn) {
                addServiceBtn.addEventListener('click', function() {
                    openServiceModal();
                });
            }
            
            // Hizmet formunu gönderme
            const serviceForm = document.getElementById('service-form');
            if (serviceForm) {
                serviceForm.addEventListener('submit', saveService);
            }
            
            // Modal kapatma butonları
            document.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    const modalId = this.getAttribute('data-modal');
                    if (modalId) {
                        document.getElementById(modalId).style.display = 'none';
                    }
                });
            });
            
            // Hizmetleri ilk yükleme
            loadServices();
        });
    </script>
</body>
</html> 