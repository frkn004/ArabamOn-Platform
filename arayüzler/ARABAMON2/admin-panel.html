<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Paneli - Arabamon</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --sidebar-width: 250px;
        }
        
        .admin-container {
            display: flex;
            min-height: 100vh;
        }
        
        .admin-sidebar {
            width: var(--sidebar-width);
            background-color: #2c3e50;
            color: white;
            position: fixed;
            height: 100vh;
            z-index: 1000;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .sidebar-header {
            padding: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #3c546c;
        }
        
        .sidebar-header h2 {
            margin: 0;
            font-size: 1.5rem;
        }
        
        .sidebar-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.25rem;
            cursor: pointer;
        }
        
        .sidebar-menu {
            padding: 1rem 0;
        }
        
        .sidebar-menu ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .sidebar-menu li {
            margin-bottom: 0.25rem;
        }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            color: #ecf0f1;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .sidebar-menu a:hover, .sidebar-menu a.active {
            background-color: #3c546c;
            color: white;
        }
        
        .sidebar-menu a i {
            margin-right: 0.75rem;
            width: 20px;
            text-align: center;
        }
        
        .sidebar-menu .submenu-icon {
            margin-left: auto;
            transition: transform 0.3s ease;
        }
        
        .sidebar-menu .has-submenu.open .submenu-icon {
            transform: rotate(180deg);
        }
        
        .sidebar-menu .submenu {
            padding-left: 1rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .sidebar-menu .has-submenu.open .submenu {
            max-height: 500px;
        }
        
        .admin-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 2rem;
            background-color: #f8f9fa;
            transition: all 0.3s ease;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid #dee2e6;
        }
        
        .admin-header h1 {
            margin: 0;
            font-size: 1.75rem;
            color: #2c3e50;
        }
        
        .admin-header .user-menu {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 0.75rem;
        }
        
        .dropdown-toggle {
            background: none;
            border: none;
            color: #2c3e50;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        
        .dropdown-toggle i {
            margin-left: 0.5rem;
        }
        
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .dashboard-card {
            background-color: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .dashboard-card-content h3 {
            margin: 0 0 0.5rem 0;
            font-size: 0.875rem;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .dashboard-card-content .number {
            font-size: 2rem;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .dashboard-card-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
        }
        
        .dashboard-card-icon.blue {
            background-color: rgba(52, 152, 219, 0.1);
            color: #3498db;
        }
        
        .dashboard-card-icon.green {
            background-color: rgba(46, 204, 113, 0.1);
            color: #2ecc71;
        }
        
        .dashboard-card-icon.orange {
            background-color: rgba(230, 126, 34, 0.1);
            color: #e67e22;
        }
        
        .dashboard-card-icon.red {
            background-color: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }
        
        .admin-table-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 2rem;
            overflow: hidden;
        }
        
        .admin-table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #dee2e6;
        }
        
        .admin-table-header h2 {
            margin: 0;
            font-size: 1.25rem;
            color: #2c3e50;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th, .admin-table td {
            padding: 1rem 1.5rem;
            text-align: left;
        }
        
        .admin-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #495057;
            border-bottom: 1px solid #dee2e6;
        }
        
        .admin-table tr {
            border-bottom: 1px solid #dee2e6;
        }
        
        .admin-table tr:last-child {
            border-bottom: none;
        }
        
        .admin-table td {
            color: #6c757d;
        }
        
        .admin-table .status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .admin-table .status.active {
            background-color: rgba(46, 204, 113, 0.1);
            color: #2ecc71;
        }
        
        .admin-table .status.pending {
            background-color: rgba(230, 126, 34, 0.1);
            color: #e67e22;
        }
        
        .admin-table .status.cancelled {
            background-color: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }
        
        .admin-table .actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .admin-table .btn-action {
            width: 32px;
            height: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            background-color: #f8f9fa;
            color: #6c757d;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .admin-table .btn-action:hover {
            background-color: #e9ecef;
            color: #495057;
        }
        
        .admin-table .btn-action.view:hover {
            background-color: rgba(52, 152, 219, 0.1);
            color: #3498db;
        }
        
        .admin-table .btn-action.edit:hover {
            background-color: rgba(46, 204, 113, 0.1);
            color: #2ecc71;
        }
        
        .admin-table .btn-action.delete:hover {
            background-color: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }
        
        /* Responsive Styles */
        @media (max-width: 992px) {
            .sidebar-toggle {
                display: block;
            }
            
            .admin-sidebar {
                transform: translateX(-100%);
            }
            
            .admin-sidebar.active {
                transform: translateX(0);
            }
            
            .admin-content {
                margin-left: 0;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .admin-table-container {
                overflow-x: auto;
            }
        }
        
        .admin-section {
            display: none;
        }
        
        .admin-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .admin-filter-bar {
            background-color: white;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--box-shadow);
        }
        
        .admin-filter-bar .search-box {
            display: flex;
            align-items: center;
            flex: 1;
            margin-right: 1rem;
        }
        
        .admin-filter-bar .search-box input {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            border-right: none;
        }
        
        .admin-filter-bar .search-box button {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            background-color: var(--primary-color);
            color: white;
        }
        
        .admin-filter-bar .filter-options {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        .action-buttons {
            display: flex;
            gap: 0.75rem;
        }
        
        .admin-pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 1.5rem;
            gap: 0.5rem;
        }
        
        .admin-pagination .btn {
            min-width: 2.5rem;
            height: 2.5rem;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .admin-pagination .btn.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        /* Navbar içindeki aktif buton stilleri */
        .sidebar-menu a.active {
            background-color: #3c546c;
            color: white;
            position: relative;
        }
        
        .sidebar-menu a.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background-color: var(--primary-color);
        }
        
        /* Checkbox stilleri */
        .admin-table input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        /* Yeni eklenen veya düzenlenen stiller */
        .form-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .form-section h3 {
            font-size: 1.25rem;
            color: #2c3e50;
            margin-bottom: 1.25rem;
            display: flex;
            align-items: center;
        }
        
        .form-section h3 i {
            margin-right: 0.75rem;
            color: var(--primary-color);
        }
        
        .form-section:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .form-col {
            flex: 1;
        }
        
        .radio-group {
            display: flex;
            gap: 1rem;
        }
        
        .form-check-inline {
            display: flex;
            align-items: center;
            margin-right: 1rem;
        }
        
        .form-check-input {
            margin-right: 0.5rem;
        }
        
        .input-group {
            display: flex;
            position: relative;
        }
        
        .input-group .form-control {
            flex: 1;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }
        
        .input-group-append {
            display: flex;
        }
        
        .input-group-append .btn {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }
        
        .toggle-password {
            height: 100%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 15px;
            border: 1px solid #ced4da;
            border-left: none;
            background-color: #f8f9fa;
            border-top-right-radius: var(--border-radius);
            border-bottom-right-radius: var(--border-radius);
        }
        
        .toggle-password:hover {
            background-color: #e9ecef;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #eee;
        }
        
        /* Modal Stilleri */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1050;
            display: none;
        }
        
        .modal.active {
            display: block;
        }
        
        .modal-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .modal-content {
            position: relative;
            max-width: 800px;
            width: 90%;
            margin: 2rem auto;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .modal-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            margin: 0;
            font-size: 1.25rem;
            color: #2c3e50;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6c757d;
        }
        
        .modal-close:hover {
            color: #343a40;
        }
        
        .modal-body {
            padding: 1.5rem;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        
        .map-instructions {
            margin-top: 1rem;
            padding: 0.75rem;
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            color: #6c757d;
        }
        
        .selected-location {
            margin-top: 1rem;
            padding: 0.75rem;
            background-color: rgba(0, 102, 204, 0.1);
            border-radius: var(--border-radius);
            color: var(--primary-color);
        }
        
        /* Dosya Yükleme Stilleri */
        .file-upload-container {
            position: relative;
            margin-bottom: 1rem;
        }
        
        .file-upload-preview {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            height: 150px;
            background-color: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .file-upload-preview i {
            font-size: 3rem;
            color: #adb5bd;
            margin-bottom: 0.5rem;
        }
        
        .file-upload-preview:hover {
            border-color: var(--primary-color);
            background-color: rgba(0, 102, 204, 0.05);
        }
        
        .file-upload-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .file-upload-container input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .file-upload-multiple {
            margin-bottom: 1rem;
        }
        
        .file-upload-dropzone {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            padding: 2rem;
            background-color: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .file-upload-dropzone i {
            font-size: 3rem;
            color: #adb5bd;
            margin-bottom: 1rem;
        }
        
        .file-upload-dropzone p {
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #495057;
        }
        
        .file-upload-text {
            font-size: 0.875rem;
            color: #6c757d;
        }
        
        .file-upload-dropzone:hover {
            border-color: var(--primary-color);
            background-color: rgba(0, 102, 204, 0.05);
        }
        
        .file-upload-dropzone input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .upload-preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .upload-preview-item {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .upload-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .upload-preview-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
            color: #dc3545;
        }
        
        .upload-preview-remove:hover {
            background-color: rgba(255, 255, 255, 1);
            color: #bd2130;
        }
        
        /* Çalışma Saatleri Stillleri */
        .working-hours-container {
            border: 1px solid #eee;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
        }
        
        .working-hours-header {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 70px;
            background-color: #f8f9fa;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #eee;
            font-weight: 600;
            color: #495057;
        }
        
        .working-hours-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 70px;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #eee;
            align-items: center;
        }
        
        .working-hours-row:last-child {
            border-bottom: none;
        }
        
        .working-hours-day {
            font-weight: 500;
        }
        
        .working-hours-time {
            padding-right: 10px;
        }
        
        .work-hour-input {
            padding: 0.5rem;
        }
        
        .working-hours-closed {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .closed-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body class="admin-body">
    <div class="admin-container">
        <!-- Admin Sidebar -->
        <aside class="admin-sidebar" id="adminSidebar">
            <div class="sidebar-header">
                <h2>Arabamon</h2>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <nav class="sidebar-menu">
                <ul>
                    <li><a href="#dashboard" class="sidebar-link active" data-section="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li class="has-submenu">
                        <a href="#" class="submenu-toggle">
                            <i class="fas fa-store"></i> İşletmeler
                            <i class="fas fa-chevron-down submenu-icon"></i>
                        </a>
                        <ul class="submenu">
                            <li><a href="#businesses" class="sidebar-link" data-section="businesses"><i class="fas fa-list"></i> İşletme Listesi</a></li>
                            <li><a href="#add-business" class="sidebar-link" data-section="add-business"><i class="fas fa-plus"></i> İşletme Ekle</a></li>
                            <li><a href="#business-categories" class="sidebar-link" data-section="business-categories"><i class="fas fa-tags"></i> Kategori Yönetimi</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu">
                        <a href="#" class="submenu-toggle">
                            <i class="fas fa-users"></i> Kullanıcılar
                            <i class="fas fa-chevron-down submenu-icon"></i>
                        </a>
                        <ul class="submenu">
                            <li><a href="#users" class="sidebar-link" data-section="users"><i class="fas fa-user-friends"></i> Kullanıcı Listesi</a></li>
                            <li><a href="#add-user" class="sidebar-link" data-section="add-user"><i class="fas fa-user-plus"></i> Kullanıcı Ekle</a></li>
                        </ul>
                    </li>
                    <li><a href="#appointments" class="sidebar-link" data-section="appointments"><i class="fas fa-calendar-alt"></i> Randevular</a></li>
                    <li class="has-submenu">
                        <a href="#" class="submenu-toggle">
                            <i class="fas fa-ticket-alt"></i> Kuponlar
                            <i class="fas fa-chevron-down submenu-icon"></i>
                        </a>
                        <ul class="submenu">
                            <li><a href="#coupons" class="sidebar-link" data-section="coupons"><i class="fas fa-list"></i> Kupon Listesi</a></li>
                            <li><a href="#add-coupon" class="sidebar-link" data-section="add-coupon"><i class="fas fa-plus"></i> Kupon Ekle</a></li>
                        </ul>
                    </li>
                    <li><a href="#reviews" class="sidebar-link" data-section="reviews"><i class="fas fa-star"></i> Değerlendirmeler</a></li>
                    <li><a href="#settings" class="sidebar-link" data-section="settings"><i class="fas fa-cog"></i> Ayarlar</a></li>
                    <li><a href="#" id="admin-logout"><i class="fas fa-sign-out-alt"></i> Çıkış Yap</a></li>
                </ul>
            </nav>
        </aside>
        
        <!-- Admin Content -->
        <main class="admin-content" id="adminContent">
            <!-- Dashboard Section -->
            <section id="dashboard" class="admin-section active">
                <header class="admin-header">
                    <h1>Dashboard</h1>
                    <div class="admin-header-user">
                        <img src="images/admin/admin-avatar.png" alt="Admin Avatar" class="user-avatar">
                        <div class="user-info">
                            <span class="user-name">Admin Kullanıcı</span>
                            <span class="user-role">Yönetici</span>
                        </div>
                    </div>
                </header>
                
                <!-- Dashboard Cards -->
                <div class="dashboard-cards">
                    <div class="dashboard-card">
                        <div class="dashboard-card-content">
                            <h3>Toplam İşletme</h3>
                            <div class="number">325</div>
                        </div>
                        <div class="dashboard-card-icon blue">
                            <i class="fas fa-store"></i>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="dashboard-card-content">
                            <h3>Toplam Kullanıcı</h3>
                            <div class="number">1,256</div>
                        </div>
                        <div class="dashboard-card-icon green">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="dashboard-card-content">
                            <h3>Bugünkü Randevu</h3>
                            <div class="number">48</div>
                        </div>
                        <div class="dashboard-card-icon orange">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="dashboard-card-content">
                            <h3>Onay Bekleyen</h3>
                            <div class="number">12</div>
                        </div>
                        <div class="dashboard-card-icon red">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Businesses -->
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h2>Son Eklenen İşletmeler</h2>
                        <a href="#" class="btn btn-sm nav-link" data-section="businesses-all">Tümünü Gör</a>
                    </div>
                    <div class="admin-table-content">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>İşletme Adı</th>
                                    <th>Kategori</th>
                                    <th>Konum</th>
                                    <th>Tarih</th>
                                    <th>Durum</th>
                                    <th>İşlemler</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Prestij Oto Yıkama</td>
                                    <td>Araç Yıkama</td>
                                    <td>İstanbul, Beşiktaş</td>
                                    <td>11.05.2023</td>
                                    <td><span class="status active">Aktif</span></td>
                                    <td>
                                        <div class="actions">
                                            <button class="btn-action view" title="Görüntüle"><i class="fas fa-eye"></i></button>
                                            <button class="btn-action edit" title="Düzenle"><i class="fas fa-edit"></i></button>
                                            <button class="btn-action delete" title="Sil"><i class="fas fa-trash"></i></button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Recent Appointments -->
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h2>Son Randevular</h2>
                        <a href="#" class="btn btn-sm nav-link" data-section="appointments">Tümünü Gör</a>
                    </div>
                    <div class="admin-table-content">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Kullanıcı</th>
                                    <th>İşletme</th>
                                    <th>Hizmet</th>
                                    <th>Tarih & Saat</th>
                                    <th>Durum</th>
                                    <th>İşlemler</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Ahmet Yılmaz</td>
                                    <td>Lüks Oto Yıkama</td>
                                    <td>Detaylı İç Temizlik</td>
                                    <td>11.05.2023 - 14:30</td>
                                    <td><span class="status pending">Bekliyor</span></td>
                                    <td>
                                        <div class="actions">
                                            <button class="btn-action view" title="Görüntüle"><i class="fas fa-eye"></i></button>
                                            <button class="btn-action edit" title="Düzenle"><i class="fas fa-edit"></i></button>
                                            <button class="btn-action delete" title="Sil"><i class="fas fa-trash"></i></button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- İşletmeler - İşletme Listesi Section -->
            <section id="businesses" class="admin-section">
                <div class="admin-header">
                    <h1>İşletme Listesi</h1>
                    <div>
                        <a href="#add-business" class="btn btn-primary sidebar-link" data-section="add-business">
                            <i class="fas fa-plus"></i> Yeni İşletme Ekle
                        </a>
                    </div>
                </div>
                
                <div class="admin-filter-bar">
                    <div class="search-box">
                        <input type="text" class="form-control" placeholder="İşletme ara...">
                        <button class="btn"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="filter-options">
                        <select class="form-control">
                            <option value="">Tüm Kategoriler</option>
                            <option value="aracyikama">Araç Yıkama</option>
                            <option value="lastikdegisim">Lastik Değişim</option>
                            <option value="ekspertiz">Ekspertiz</option>
                            <option value="otopark">Otopark</option>
                        </select>
                    </div>
                </div>
                
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h2>İşletmeler</h2>
                    </div>
                    <table class="admin-table" id="businesses-table">
                        <thead>
                            <tr>
                                <th>İşletme Adı</th>
                                <th>Kategori</th>
                                <th>Adres</th>
                                <th>Telefon</th>
                                <th>Durum</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- JavaScript ile doldurulacak -->
                            <tr>
                                <td colspan="6" class="text-center">Henüz işletme bulunmuyor.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- İşletme Ekleme Bölümü -->
            <section id="add-business" class="admin-section">
                <div class="admin-header">
                    <h1>Yeni İşletme Ekle</h1>
                    <div>
                        <a href="#businesses" class="btn btn-secondary sidebar-link" data-section="businesses">
                            <i class="fas fa-arrow-left"></i> İşletme Listesine Dön
                        </a>
                    </div>
                </div>
                
                <div class="alert alert-success" id="business-success-alert" style="display: none;"></div>
                <div class="alert alert-danger" id="business-error-alert" style="display: none;"></div>
                
                <div class="card" style="padding: 2rem;">
                    <form id="add-business-form">
                        <div class="form-section">
                            <h3><i class="fas fa-info-circle"></i> Temel Bilgiler</h3>
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="business-name">İşletme Adı *</label>
                                        <input type="text" id="business-name" name="businessName" class="form-control" required>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="business-category">Kategori *</label>
                                        <select id="business-category" name="category" class="form-control" required>
                                            <option value="">Kategori Seçin</option>
                                            <option value="aracyikama">Araç Yıkama</option>
                                            <option value="lastikdegisim">Lastik Değişim</option>
                                            <option value="ekspertiz">Ekspertiz</option>
                                            <option value="otopark">Otopark</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="business-description">İşletme Açıklaması</label>
                                <textarea id="business-description" name="description" class="form-control" rows="3" placeholder="İşletme hakkında kısa açıklama yazın..."></textarea>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-phone-alt"></i> İletişim Bilgileri</h3>
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="business-phone">Telefon *</label>
                                        <input type="tel" id="business-phone" name="phone" class="form-control" required placeholder="Örn: 05551234567">
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="business-email">E-posta *</label>
                                        <input type="email" id="business-email" name="email" class="form-control" required placeholder="Örn: info@isletme.com">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="business-website">Web Sitesi</label>
                                <input type="url" id="business-website" name="website" class="form-control" placeholder="Örn: https://www.isletme.com">
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-map-marker-alt"></i> Adres Bilgileri</h3>
                            <div class="form-group">
                                <label for="business-address">Adres *</label>
                                <textarea id="business-address" name="address" class="form-control" rows="2" required placeholder="İşletmenin açık adresi"></textarea>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="business-city">İl *</label>
                                        <input type="text" id="business-city" name="city" class="form-control" required>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="business-district">İlçe *</label>
                                        <input type="text" id="business-district" name="district" class="form-control" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="business-latitude">Enlem (Latitude)</label>
                                        <div class="input-group">
                                            <input type="text" id="business-latitude" name="latitude" class="form-control" placeholder="Örn: 41.0082">
                                            <div class="input-group-append">
                                                <button type="button" class="btn btn-secondary map-button" id="show-map-btn">
                                                    <i class="fas fa-map"></i> Haritada Seç
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="business-longitude">Boylam (Longitude)</label>
                                        <input type="text" id="business-longitude" name="longitude" class="form-control" placeholder="Örn: 28.9784">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-money-check-alt"></i> Finans Bilgileri</h3>
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="business-iban">IBAN</label>
                                        <input type="text" id="business-iban" name="iban" class="form-control" placeholder="TR...">
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="business-tax-number">Vergi Numarası</label>
                                        <input type="text" id="business-tax-number" name="taxNumber" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-clock"></i> Çalışma Saatleri</h3>
                            <div class="working-hours-container">
                                <div class="working-hours-header">
                                    <div class="working-hours-day">Gün</div>
                                    <div class="working-hours-time">Açılış</div>
                                    <div class="working-hours-time">Kapanış</div>
                                    <div class="working-hours-closed">Kapalı</div>
                                </div>
                                
                                <div class="working-hours-row">
                                    <div class="working-hours-day">Pazartesi</div>
                                    <div class="working-hours-time">
                                        <input type="time" name="monday_open" class="form-control work-hour-input" value="09:00">
                                    </div>
                                    <div class="working-hours-time">
                                        <input type="time" name="monday_close" class="form-control work-hour-input" value="18:00">
                                    </div>
                                    <div class="working-hours-closed">
                                        <input type="checkbox" name="monday_closed" class="closed-checkbox">
                                    </div>
                                </div>
                                
                                <div class="working-hours-row">
                                    <div class="working-hours-day">Salı</div>
                                    <div class="working-hours-time">
                                        <input type="time" name="tuesday_open" class="form-control work-hour-input" value="09:00">
                                    </div>
                                    <div class="working-hours-time">
                                        <input type="time" name="tuesday_close" class="form-control work-hour-input" value="18:00">
                                    </div>
                                    <div class="working-hours-closed">
                                        <input type="checkbox" name="tuesday_closed" class="closed-checkbox">
                                    </div>
                                </div>
                                
                                <div class="working-hours-row">
                                    <div class="working-hours-day">Çarşamba</div>
                                    <div class="working-hours-time">
                                        <input type="time" name="wednesday_open" class="form-control work-hour-input" value="09:00">
                                    </div>
                                    <div class="working-hours-time">
                                        <input type="time" name="wednesday_close" class="form-control work-hour-input" value="18:00">
                                    </div>
                                    <div class="working-hours-closed">
                                        <input type="checkbox" name="wednesday_closed" class="closed-checkbox">
                                    </div>
                                </div>
                                
                                <div class="working-hours-row">
                                    <div class="working-hours-day">Perşembe</div>
                                    <div class="working-hours-time">
                                        <input type="time" name="thursday_open" class="form-control work-hour-input" value="09:00">
                                    </div>
                                    <div class="working-hours-time">
                                        <input type="time" name="thursday_close" class="form-control work-hour-input" value="18:00">
                                    </div>
                                    <div class="working-hours-closed">
                                        <input type="checkbox" name="thursday_closed" class="closed-checkbox">
                                    </div>
                                </div>
                                
                                <div class="working-hours-row">
                                    <div class="working-hours-day">Cuma</div>
                                    <div class="working-hours-time">
                                        <input type="time" name="friday_open" class="form-control work-hour-input" value="09:00">
                                    </div>
                                    <div class="working-hours-time">
                                        <input type="time" name="friday_close" class="form-control work-hour-input" value="18:00">
                                    </div>
                                    <div class="working-hours-closed">
                                        <input type="checkbox" name="friday_closed" class="closed-checkbox">
                                    </div>
                                </div>
                                
                                <div class="working-hours-row">
                                    <div class="working-hours-day">Cumartesi</div>
                                    <div class="working-hours-time">
                                        <input type="time" name="saturday_open" class="form-control work-hour-input" value="10:00">
                                    </div>
                                    <div class="working-hours-time">
                                        <input type="time" name="saturday_close" class="form-control work-hour-input" value="16:00">
                                    </div>
                                    <div class="working-hours-closed">
                                        <input type="checkbox" name="saturday_closed" class="closed-checkbox">
                                    </div>
                                </div>
                                
                                <div class="working-hours-row">
                                    <div class="working-hours-day">Pazar</div>
                                    <div class="working-hours-time">
                                        <input type="time" name="sunday_open" class="form-control work-hour-input" value="10:00">
                                    </div>
                                    <div class="working-hours-time">
                                        <input type="time" name="sunday_close" class="form-control work-hour-input" value="16:00">
                                    </div>
                                    <div class="working-hours-closed">
                                        <input type="checkbox" name="sunday_closed" class="closed-checkbox">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>İşletme Durumu</label>
                                <div class="radio-group">
                                    <div class="form-check form-check-inline">
                                        <input type="radio" id="business-status-active" name="status" value="active" class="form-check-input" checked>
                                        <label for="business-status-active" class="form-check-label">Aktif</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input type="radio" id="business-status-inactive" name="status" value="inactive" class="form-check-input">
                                        <label for="business-status-inactive" class="form-check-label">Pasif</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-images"></i> Fotoğraflar</h3>
                            <div class="form-group">
                                <label for="business-logo">İşletme Logosu</label>
                                <div class="file-upload-container">
                                    <div class="file-upload-preview" id="logo-preview">
                                        <i class="fas fa-building"></i>
                                        <span>Logo Yükleyin</span>
                                    </div>
                                    <input type="file" id="business-logo" name="logo" class="form-control-file" accept="image/*">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>İşletme Fotoğrafları</label>
                                <div class="file-upload-multiple">
                                    <div class="file-upload-dropzone" id="photo-dropzone">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Fotoğrafları sürükleyin veya seçin</p>
                                        <span class="file-upload-text">En fazla 5 adet fotoğraf (JPEG, PNG)</span>
                                        <input type="file" id="business-photos" name="photos" multiple accept="image/*" class="form-control-file">
                                    </div>
                                    <div class="upload-preview-container" id="photos-preview-container">
                                        <!-- Yüklenen fotoğraflar burada gösterilecek -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="reset" class="btn btn-secondary">
                                <i class="fas fa-undo"></i> Formu Temizle
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> İşletme Ekle
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Harita Modal -->
                <div class="modal" id="map-modal">
                    <div class="modal-overlay"></div>
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Konum Seçin</h3>
                            <button type="button" class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div id="location-map" style="height: 400px;"></div>
                            <div class="map-instructions">
                                <p><i class="fas fa-info-circle"></i> Harita üzerinde işletmenin konumuna tıklayın.</p>
                            </div>
                            <div class="selected-location" id="selected-location" style="display: none;">
                                <p><strong>Seçilen Konum:</strong> <span id="selected-coordinates"></span></p>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary modal-close">İptal</button>
                            <button type="button" class="btn btn-primary" id="confirm-location">Konumu Seç</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Kullanıcılar - Tüm Kullanıcılar Section -->
            <section id="users-all" class="admin-section">
                <header class="admin-header">
                    <h1>Tüm Kullanıcılar</h1>
                    <div class="action-buttons">
                        <button class="btn btn-sm btn-primary"><i class="fas fa-plus"></i> Yeni Kullanıcı</button>
                        <button class="btn btn-sm"><i class="fas fa-download"></i> Dışa Aktar</button>
                    </div>
                </header>
                
                <div class="admin-filter-bar">
                    <div class="search-box">
                        <input type="text" placeholder="Kullanıcı ara..." class="form-control">
                        <button class="btn btn-sm"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="filter-options">
                        <select class="form-control">
                            <option value="">Tüm Roller</option>
                            <option value="user">Kullanıcı</option>
                            <option value="business">İşletme Sahibi</option>
                            <option value="admin">Yönetici</option>
                        </select>
                        <select class="form-control">
                            <option value="">Tüm Durumlar</option>
                            <option value="active">Aktif</option>
                            <option value="suspended">Askıya Alınmış</option>
                            <option value="deleted">Silinmiş</option>
                        </select>
                    </div>
                </div>
                
                <div class="admin-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" class="select-all"></th>
                                <th>Ad Soyad</th>
                                <th>E-posta</th>
                                <th>Rol</th>
                                <th>Kayıt Tarihi</th>
                                <th>Son Giriş</th>
                                <th>Durum</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox" class="select-item"></td>
                                <td>Ahmet Yılmaz</td>
                                <td>ahmet@example.com</td>
                                <td>Kullanıcı</td>
                                <td>10.03.2023</td>
                                <td>12.05.2023</td>
                                <td><span class="status active">Aktif</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="btn-action view" title="Görüntüle"><i class="fas fa-eye"></i></button>
                                        <button class="btn-action edit" title="Düzenle"><i class="fas fa-edit"></i></button>
                                        <button class="btn-action delete" title="Sil"><i class="fas fa-trash"></i></button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="admin-pagination">
                    <button class="btn btn-sm"><i class="fas fa-chevron-left"></i></button>
                    <button class="btn btn-sm active">1</button>
                    <button class="btn btn-sm">2</button>
                    <button class="btn btn-sm">3</button>
                    <span>...</span>
                    <button class="btn btn-sm">20</button>
                    <button class="btn btn-sm"><i class="fas fa-chevron-right"></i></button>
                </div>
            </section>
            
            <!-- Randevular Section -->
            <section id="appointments" class="admin-section">
                <div class="admin-header">
                    <h1>Randevu Yönetimi</h1>
                    <div>
                        <button class="btn btn-primary" id="add-appointment-btn">
                            <i class="fas fa-plus"></i> Yeni Randevu Oluştur
                        </button>
                    </div>
                </div>
                
                <div class="admin-filter-bar">
                    <div class="search-box">
                        <input type="text" class="form-control" id="appointment-search" placeholder="Randevu ara...">
                        <button class="btn"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="filter-options">
                        <select class="form-control" id="appointment-status-filter">
                            <option value="">Tüm Durumlar</option>
                            <option value="pending">Bekleyen</option>
                            <option value="confirmed">Onaylanmış</option>
                            <option value="completed">Tamamlanmış</option>
                            <option value="cancelled">İptal Edilmiş</option>
                        </select>
                        <input type="date" class="form-control" id="appointment-date-filter">
                    </div>
                </div>
                
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h2>Randevular</h2>
                    </div>
                    <table class="admin-table" id="appointments-table">
                        <thead>
                            <tr>
                                <th>Randevu No</th>
                                <th>Müşteri</th>
                                <th>İşletme</th>
                                <th>Hizmet</th>
                                <th>Tarih</th>
                                <th>Saat</th>
                                <th>Durum</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- JavaScript ile doldurulacak -->
                            <tr>
                            <tr>
                                <td><input type="checkbox" class="select-item"></td>
                                <td>12345</td>
                                <td>Ahmet Yılmaz</td>
                                <td>Lüks Oto Yıkama</td>
                                <td>Detaylı İç Temizlik</td>
                                <td>11.05.2023 - 14:30</td>
                                <td>150 TL</td>
                                <td><span class="status pending">Bekliyor</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="btn-action view" title="Görüntüle"><i class="fas fa-eye"></i></button>
                                        <button class="btn-action edit" title="Düzenle"><i class="fas fa-edit"></i></button>
                                        <button class="btn-action delete" title="Sil"><i class="fas fa-trash"></i></button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="admin-pagination">
                    <button class="btn btn-sm"><i class="fas fa-chevron-left"></i></button>
                    <button class="btn btn-sm active">1</button>
                    <button class="btn btn-sm">2</button>
                    <button class="btn btn-sm">3</button>
                    <span>...</span>
                    <button class="btn btn-sm">10</button>
                    <button class="btn btn-sm"><i class="fas fa-chevron-right"></i></button>
                </div>
            </section>
            
            <!-- Kategori Yönetimi Bölümü -->
            <section id="business-categories" class="admin-section">
                <div class="admin-header">
                    <h1>Kategori Yönetimi</h1>
                    <div>
                        <button class="btn btn-primary" id="add-category-btn">
                            <i class="fas fa-plus"></i> Yeni Kategori Ekle
                        </button>
                    </div>
                </div>
                
                <div class="alert alert-success" id="category-success-alert" style="display: none;"></div>
                <div class="alert alert-danger" id="category-error-alert" style="display: none;"></div>
                
                <div class="row">
                    <div class="col-8">
                        <div class="admin-table-container">
                            <div class="admin-table-header">
                                <h2>Kategoriler</h2>
                            </div>
                            <table class="admin-table" id="categories-table">
                                <thead>
                                    <tr>
                                        <th width="5%">ID</th>
                                        <th width="25%">Kategori Adı</th>
                                        <th width="15%">İkon</th>
                                        <th width="20%">Renk</th>
                                        <th width="15%">İşletme Sayısı</th>
                                        <th width="20%">İşlemler</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- JavaScript ile doldurulacak -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="col-4">
                        <div class="card">
                            <div class="card-header">
                                <h3 id="category-form-title">Yeni Kategori Ekle</h3>
                            </div>
                            <div class="card-body">
                                <form id="category-form">
                                    <input type="hidden" id="category-id" name="id">
                                    
                                    <div class="form-group">
                                        <label for="category-name">Kategori Adı *</label>
                                        <input type="text" id="category-name" name="name" class="form-control" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="category-slug">Slug *</label>
                                        <input type="text" id="category-slug" name="slug" class="form-control" required>
                                        <small class="form-text text-muted">URL'lerde kullanılacak benzersiz tanımlayıcı (örn: arac-yikama)</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="category-icon">İkon</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i id="icon-preview" class="fas fa-car"></i></span>
                                            </div>
                                            <input type="text" id="category-icon" name="icon" class="form-control" value="fa-car">
                                        </div>
                                        <small class="form-text text-muted">Font Awesome ikon kodu (örn: fa-car)</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="category-color">Renk</label>
                                        <div class="d-flex">
                                            <input type="color" id="category-color" name="color" class="form-control" value="#0066cc" style="height: 38px; padding: 5px;">
                                            <input type="text" id="category-color-hex" class="form-control ml-2" value="#0066cc" readonly>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="category-description">Açıklama</label>
                                        <textarea id="category-description" name="description" class="form-control" rows="3"></textarea>
                                    </div>
                                    
                                    <div class="form-actions text-right" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #eee;">
                                        <button type="button" id="category-cancel-btn" class="btn btn-secondary">
                                            <i class="fas fa-times"></i> İptal
                                        </button>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save"></i> Kaydet
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Kullanıcı Ekleme Bölümü -->
            <section id="add-user" class="admin-section">
                <div class="admin-header">
                    <h1>Yeni Kullanıcı Ekle</h1>
                    <div>
                        <a href="#users" class="btn btn-secondary sidebar-link" data-section="users">
                            <i class="fas fa-arrow-left"></i> Kullanıcı Listesine Dön
                        </a>
                    </div>
                </div>
                
                <div class="alert alert-success" id="user-success-alert" style="display: none;"></div>
                <div class="alert alert-danger" id="user-error-alert" style="display: none;"></div>
                
                <div class="card" style="padding: 2rem;">
                    <form id="add-user-form">
                        <div class="form-section">
                            <h3><i class="fas fa-user"></i> Kişisel Bilgiler</h3>
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="user-firstname">Ad *</label>
                                        <input type="text" id="user-firstname" name="firstName" class="form-control" required>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="user-lastname">Soyad *</label>
                                        <input type="text" id="user-lastname" name="lastName" class="form-control" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="user-email">E-posta *</label>
                                        <input type="email" id="user-email" name="email" class="form-control" required>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="user-phone">Telefon *</label>
                                        <input type="tel" id="user-phone" name="phone" class="form-control" required placeholder="05XX XXX XXXX">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-lock"></i> Giriş Bilgileri</h3>
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="user-password">Şifre *</label>
                                        <div class="input-group">
                                            <input type="password" id="user-password" name="password" class="form-control" minlength="6" required>
                                            <div class="toggle-password">
                                                <i class="fas fa-eye"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="user-password-confirm">Şifre Tekrar *</label>
                                        <div class="input-group">
                                            <input type="password" id="user-password-confirm" name="passwordConfirm" class="form-control" minlength="6" required>
                                            <div class="toggle-password">
                                                <i class="fas fa-eye"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-user-cog"></i> Kullanıcı Ayarları</h3>
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="user-role">Kullanıcı Türü *</label>
                                        <select id="user-role" name="role" class="form-control" required>
                                            <option value="user">Normal Kullanıcı</option>
                                            <option value="business">İşletme Sahibi</option>
                                            <option value="admin">Yönetici</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="user-status">Durum *</label>
                                        <select id="user-status" name="status" class="form-control" required>
                                            <option value="active">Aktif</option>
                                            <option value="inactive">Pasif</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <div class="form-check">
                                            <input type="checkbox" id="user-verified" name="verified" class="form-check-input" checked>
                                            <label for="user-verified" class="form-check-label">E-posta doğrulanmış olarak işaretle</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <div class="form-check">
                                            <input type="checkbox" id="user-welcome-email" name="sendWelcomeEmail" class="form-check-input" checked>
                                            <label for="user-welcome-email" class="form-check-label">Hoş geldiniz e-postası gönder</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="reset" class="btn btn-secondary">
                                <i class="fas fa-undo"></i> Formu Temizle
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-user-plus"></i> Kullanıcı Ekle
                            </button>
                        </div>
                    </form>
                </div>
            </section>
            
            <!-- Kullanıcılar Listesi Bölümü -->
            <section id="users" class="admin-section">
                <div class="admin-header">
                    <h1>Kullanıcı Listesi</h1>
                    <div>
                        <a href="#add-user" class="btn btn-primary sidebar-link" data-section="add-user">
                            <i class="fas fa-plus"></i> Yeni Kullanıcı Ekle
                        </a>
                    </div>
                </div>
                
                <div class="admin-filter-bar">
                    <div class="search-box">
                        <input type="text" class="form-control" id="user-search" placeholder="Kullanıcı ara...">
                        <button class="btn"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="filter-options">
                        <select class="form-control" id="user-role-filter">
                            <option value="">Tüm Roller</option>
                            <option value="user">Normal Kullanıcı</option>
                            <option value="business">İşletme Sahibi</option>
                            <option value="admin">Yönetici</option>
                        </select>
                        <select class="form-control" id="user-status-filter">
                            <option value="">Tüm Durumlar</option>
                            <option value="active">Aktif</option>
                            <option value="inactive">Pasif</option>
                        </select>
                    </div>
                </div>
                
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h2>Kullanıcılar</h2>
                    </div>
                    <table class="admin-table" id="users-table">
                        <thead>
                            <tr>
                                <th>Ad Soyad</th>
                                <th>E-posta</th>
                                <th>Telefon</th>
                                <th>Rol</th>
                                <th>Durum</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- JavaScript ile doldurulacak -->
                        </tbody>
                    </table>
                </div>
                
                <div class="admin-pagination">
                    <button class="btn btn-sm"><i class="fas fa-chevron-left"></i></button>
                    <button class="btn btn-sm active">1</button>
                    <button class="btn btn-sm">2</button>
                    <button class="btn btn-sm">3</button>
                    <span>...</span>
                    <button class="btn btn-sm">10</button>
                    <button class="btn btn-sm"><i class="fas fa-chevron-right"></i></button>
                </div>
            </section>
            
            <!-- Kupon Listesi Bölümü -->
            <section id="coupons" class="admin-section">
                <div class="admin-header">
                    <h1>Kupon Listesi</h1>
                    <div>
                        <a href="#add-coupon" class="btn btn-primary sidebar-link" data-section="add-coupon">
                            <i class="fas fa-plus"></i> Yeni Kupon Ekle
                        </a>
                    </div>
                </div>
                
                <div class="admin-filter-bar">
                    <div class="search-box">
                        <input type="text" class="form-control" id="coupon-search" placeholder="Kupon ara...">
                        <button class="btn"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="filter-options">
                        <select class="form-control" id="coupon-type-filter">
                            <option value="">Tüm Kupon Tipleri</option>
                            <option value="percent">Yüzde İndirim</option>
                            <option value="fixed">Sabit İndirim</option>
                            <option value="free">Ücretsiz Hizmet</option>
                        </select>
                        <select class="form-control" id="coupon-status-filter">
                            <option value="">Tüm Durumlar</option>
                            <option value="active">Aktif</option>
                            <option value="inactive">Pasif</option>
                            <option value="expired">Süresi Dolmuş</option>
                        </select>
                    </div>
                </div>
                
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h2>Kuponlar</h2>
                    </div>
                    <table class="admin-table" id="coupons-table">
                        <thead>
                            <tr>
                                <th>Kupon Kodu</th>
                                <th>Açıklama</th>
                                <th>İndirim Türü</th>
                                <th>Değer</th>
                                <th>İşletme</th>
                                <th>Kullanım Limiti</th>
                                <th>Bitiş Tarihi</th>
                                <th>Durum</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- JavaScript ile doldurulacak -->
                        </tbody>
                    </table>
                </div>
                
                <div class="admin-pagination">
                    <button class="btn btn-sm"><i class="fas fa-chevron-left"></i></button>
                    <button class="btn btn-sm active">1</button>
                    <button class="btn btn-sm">2</button>
                    <button class="btn btn-sm">3</button>
                    <span>...</span>
                    <button class="btn btn-sm">10</button>
                    <button class="btn btn-sm"><i class="fas fa-chevron-right"></i></button>
                </div>
            </section>
            
            <!-- Kupon Ekleme Bölümü -->
            <section id="add-coupon" class="admin-section">
                <div class="admin-header">
                    <h1>Yeni Kupon Ekle</h1>
                    <div>
                        <a href="#coupons" class="btn btn-secondary sidebar-link" data-section="coupons">
                            <i class="fas fa-arrow-left"></i> Kupon Listesine Dön
                        </a>
                    </div>
                </div>
                
                <div class="alert alert-success" id="coupon-success-alert" style="display: none;"></div>
                <div class="alert alert-danger" id="coupon-error-alert" style="display: none;"></div>
                
                <div class="card" style="padding: 2rem;">
                    <form id="add-coupon-form">
                        <input type="hidden" id="coupon-id" name="id">
                        
                        <div class="form-section">
                            <h3><i class="fas fa-ticket-alt"></i> Kupon Bilgileri</h3>
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-code">Kupon Kodu *</label>
                                        <div class="input-group">
                                            <input type="text" id="coupon-code" name="code" class="form-control" required>
                                            <div class="input-group-append">
                                                <button type="button" class="btn btn-primary" id="generate-code-btn">
                                                    <i class="fas fa-random"></i> Kod Oluştur
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-description">Açıklama *</label>
                                        <input type="text" id="coupon-description" name="description" class="form-control" required placeholder="Örn: Yılbaşı Özel İndirimi">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-type">İndirim Türü *</label>
                                        <select id="coupon-type" name="type" class="form-control" required>
                                            <option value="percent">Yüzde İndirim (%)</option>
                                            <option value="fixed">Sabit İndirim (TL)</option>
                                            <option value="free">Ücretsiz Hizmet</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-value">İndirim Değeri *</label>
                                        <div class="input-group">
                                            <input type="number" id="coupon-value" name="value" class="form-control" min="0" required>
                                            <div class="input-group-append">
                                                <span class="input-group-text" id="coupon-value-symbol">%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-min-order">Minimum Sepet Tutarı</label>
                                        <div class="input-group">
                                            <input type="number" id="coupon-min-order" name="minOrderAmount" class="form-control" min="0">
                                            <div class="input-group-append">
                                                <span class="input-group-text">TL</span>
                                            </div>
                                        </div>
                                        <small class="form-text text-muted">Kuponun geçerli olması için minimum sepet tutarı (opsiyonel)</small>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-max-discount">Maksimum İndirim Tutarı</label>
                                        <div class="input-group">
                                            <input type="number" id="coupon-max-discount" name="maxDiscountAmount" class="form-control" min="0">
                                            <div class="input-group-append">
                                                <span class="input-group-text">TL</span>
                                            </div>
                                        </div>
                                        <small class="form-text text-muted">Yüzde indirimde uygulanacak maksimum tutar (opsiyonel)</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-store"></i> Geçerlilik</h3>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-business">İşletme</label>
                                        <select id="coupon-business" name="businessId" class="form-control">
                                            <option value="">Tüm İşletmeler</option>
                                            <!-- JavaScript ile doldurulacak -->
                                        </select>
                                        <small class="form-text text-muted">Belirli bir işletme için geçerli olacaksa seçin</small>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-service">Hizmet</label>
                                        <select id="coupon-service" name="serviceId" class="form-control" disabled>
                                            <option value="">Tüm Hizmetler</option>
                                            <!-- JavaScript ile doldurulacak -->
                                        </select>
                                        <small class="form-text text-muted">Belirli bir hizmet için geçerli olacaksa seçin</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-start-date">Başlangıç Tarihi *</label>
                                        <input type="date" id="coupon-start-date" name="startDate" class="form-control" required>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-end-date">Bitiş Tarihi *</label>
                                        <input type="date" id="coupon-end-date" name="endDate" class="form-control" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-usage-limit">Kullanım Limiti</label>
                                        <input type="number" id="coupon-usage-limit" name="usageLimit" class="form-control" min="0">
                                        <small class="form-text text-muted">Kupanın kaç kez kullanılabileceği (boş: limitsiz)</small>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-user-usage-limit">Kullanıcı Başına Limit</label>
                                        <input type="number" id="coupon-user-usage-limit" name="userUsageLimit" class="form-control" min="0" value="1">
                                        <small class="form-text text-muted">Bir kullanıcının kuponu kaç kez kullanabileceği</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-cog"></i> Diğer Ayarlar</h3>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="coupon-status">Durum *</label>
                                        <select id="coupon-status" name="status" class="form-control" required>
                                            <option value="active">Aktif</option>
                                            <option value="inactive">Pasif</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <div class="form-check mt-4">
                                            <input type="checkbox" id="coupon-public" name="isPublic" class="form-check-input" checked>
                                            <label for="coupon-public" class="form-check-label">Herkese açık kupon (Duyurularda gösterilir)</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="reset" class="btn btn-secondary">
                                <i class="fas fa-undo"></i> Formu Temizle
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Kuponu Kaydet
                            </button>
                        </div>
                    </form>
                </div>
            </section>
            
            <!-- Değerlendirmeler Bölümü -->
            <section id="reviews" class="admin-section">
                <div class="admin-header">
                    <h1>Değerlendirmeler</h1>
                    <div>
                        <button class="btn btn-primary" id="export-reviews-btn">
                            <i class="fas fa-download"></i> Rapor İndir
                        </button>
                    </div>
                </div>
                
                <div class="admin-filter-bar">
                    <div class="search-box">
                        <input type="text" class="form-control" id="review-search" placeholder="Değerlendirme ara...">
                        <button class="btn"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="filter-options">
                        <select class="form-control" id="review-business-filter">
                            <option value="">Tüm İşletmeler</option>
                            <!-- JavaScript ile doldurulacak -->
                        </select>
                        <select class="form-control" id="review-rating-filter">
                            <option value="">Tüm Puanlar</option>
                            <option value="5">5 Yıldız</option>
                            <option value="4">4 Yıldız</option>
                            <option value="3">3 Yıldız</option>
                            <option value="2">2 Yıldız</option>
                            <option value="1">1 Yıldız</option>
                        </select>
                        <select class="form-control" id="review-status-filter">
                            <option value="">Tüm Durumlar</option>
                            <option value="approved">Onaylanmış</option>
                            <option value="pending">Onay Bekliyor</option>
                            <option value="rejected">Reddedilmiş</option>
                        </select>
                    </div>
                </div>
                
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h2>Değerlendirmeler</h2>
                    </div>
                    <table class="admin-table" id="reviews-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Müşteri</th>
                                <th>İşletme</th>
                                <th>Puan</th>
                                <th>Yorum</th>
                                <th>Tarih</th>
                                <th>Durum</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- JavaScript ile doldurulacak -->
                        </tbody>
                    </table>
                </div>
                
                <div class="admin-pagination">
                    <button class="btn btn-sm"><i class="fas fa-chevron-left"></i></button>
                    <button class="btn btn-sm active">1</button>
                    <button class="btn btn-sm">2</button>
                    <button class="btn btn-sm">3</button>
                    <span>...</span>
                    <button class="btn btn-sm">10</button>
                    <button class="btn btn-sm"><i class="fas fa-chevron-right"></i></button>
                </div>
                
                <!-- Değerlendirme Detay Modalı -->
                <div class="modal" id="review-detail-modal">
                    <div class="modal-overlay"></div>
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Değerlendirme Detayı</h3>
                            <button type="button" class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="review-detail-content">
                                <div class="review-header">
                                    <div class="review-user">
                                        <h4 id="review-user-name">Kullanıcı Adı</h4>
                                        <span id="review-date">01.01.2023</span>
                                    </div>
                                    <div class="review-rating" id="review-rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                </div>
                                
                                <div class="review-business">
                                    <strong>İşletme:</strong> <span id="review-business-name">İşletme Adı</span>
                                </div>
                                
                                <div class="review-service">
                                    <strong>Hizmet:</strong> <span id="review-service-name">Hizmet Adı</span>
                                </div>
                                
                                <div class="review-text">
                                    <p id="review-comment">Değerlendirme yorumu burada görünecek...</p>
                                </div>
                                
                                <div class="review-photos" id="review-photos">
                                    <!-- Fotoğraflar buraya eklenecek -->
                                </div>
                                
                                <hr>
                                
                                <div class="review-business-reply" id="review-reply-container">
                                    <h5>İşletme Yanıtı</h5>
                                    <div id="review-reply">İşletmenin yanıtı buraya görünecek...</div>
                                </div>
                                
                                <div class="review-status">
                                    <strong>Durum:</strong> <span id="review-status-text" class="status">Onay Bekliyor</span>
                                </div>
                            </div>
                            
                            <div class="review-admin-actions">
                                <div class="form-group">
                                    <label for="review-admin-note">Admin Notu:</label>
                                    <textarea id="review-admin-note" class="form-control" rows="2"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" id="reject-review-btn">
                                <i class="fas fa-times"></i> Reddet
                            </button>
                            <button type="button" class="btn btn-success" id="approve-review-btn">
                                <i class="fas fa-check"></i> Onayla
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Admin JS -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sidebar toggle
            const sidebarToggle = document.querySelector('.sidebar-toggle');
            const sidebar = document.querySelector('.admin-sidebar');
            const adminContent = document.querySelector('.admin-content');
            
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('active');
                adminContent.classList.toggle('full-width');
            });
            
            // Submenu toggle
            const submenuToggles = document.querySelectorAll('.submenu-toggle');
            
            submenuToggles.forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    const parent = this.parentElement;
                    parent.classList.toggle('open');
                });
            });
            
            // Section navigation
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const adminSections = document.querySelectorAll('.admin-section');
            
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Sayfalar arası geçiş
                    const targetSection = this.getAttribute('data-section');
                    
                    // Aktif linkleri temizle
                    sidebarLinks.forEach(link => link.classList.remove('active'));
                    
                    // Bu linki aktif et
                    this.classList.add('active');
                    
                    // Bölümleri gizle
                    adminSections.forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Hedef bölümü göster
                    document.getElementById(targetSection).classList.add('active');
                    
                    // URL'yi güncelle
                    window.location.hash = targetSection;
                    
                    // Responsive modda sidebar'ı kapat
                    if (window.innerWidth < 992) {
                        sidebar.classList.remove('active');
                    }
                });
            });
            
            // Hash değişiminde doğru sayfı aç
            function handleHashChange() {
                const hash = window.location.hash.substring(1) || 'dashboard';
                const link = document.querySelector(`.sidebar-link[data-section="${hash}"]`);
                
                if (link) {
                    link.click();
                }
            }
            
            // Sayfa yüklendiğinde ve hash değişiminde çalıştır
            window.addEventListener('hashchange', handleHashChange);
            handleHashChange();
            
            // Çıkış işlevi
            document.getElementById('admin-logout').addEventListener('click', async function(e) {
                e.preventDefault();
                
                if (confirm('Çıkış yapmak istediğinize emin misiniz?')) {
                    try {
                        await window.arabamonAPI.logout();
                        localStorage.removeItem('token');
                        localStorage.removeItem('currentUser');
                        window.location.href = 'login.html';
                    } catch (error) {
                        alert('Çıkış yapılırken bir hata oluştu: ' + error.message);
                    }
                }
            });
            
            // MOCK veriler
            const MOCK_BUSINESSES = [
                {
                    id: 'biz1',
                    name: 'Prestij Oto Yıkama',
                    category: 'aracyikama',
                    address: 'Atatürk Mah. İstanbul Cad. No:123',
                    city: 'İstanbul',
                    district: 'Ataşehir',
                    phone: '05551234567',
                    email: 'info@prestijotoyikama.com',
                    status: 'active'
                },
                {
                    id: 'biz2',
                    name: 'Hızlı Lastik Değişim',
                    category: 'lastikdegisim',
                    address: 'Cumhuriyet Mah. Ankara Cad. No:45',
                    city: 'Ankara',
                    district: 'Çankaya',
                    phone: '05552223344',
                    email: 'info@hizlilastik.com',
                    status: 'active'
                }
            ];
            
            // Mock users
            const MOCK_USERS = [
                {
                    id: 'user1',
                    firstName: 'Test',
                    lastName: 'Kullanıcı',
                    email: 'test@example.com',
                    phone: '05551112233',
                    role: 'user',
                    status: 'active',
                    verified: true
                },
                {
                    id: 'user2',
                    firstName: 'Admin',
                    lastName: 'Kullanıcı',
                    email: 'admin@arabamon.com',
                    phone: '05559998877',
                    role: 'admin',
                    status: 'active',
                    verified: true
                }
            ];
            
            // Mock randevular
            const MOCK_APPOINTMENTS = [
                {
                    id: 'apt1',
                    customerId: 'user1',
                    businessId: 'biz1',
                    serviceId: 'srv1',
                    serviceName: 'İç-Dış Yıkama',
                    date: '2023-04-15',
                    time: '14:30',
                    status: 'completed',
                    notes: 'SUV araç, cilalama paketi dahil',
                    createdAt: '2023-04-10'
                },
                {
                    id: 'apt2',
                    customerId: 'user1',
                    businessId: 'biz2',
                    serviceId: 'srv2',
                    serviceName: 'Lastik Değişimi (4 Adet)',
                    date: '2023-04-25',
                    time: '10:00',
                    status: 'confirmed',
                    notes: '',
                    createdAt: '2023-04-15'
                }
            ];
            
            // Mock hizmetler
            const MOCK_SERVICES = [
                {
                    id: 'srv1',
                    businessId: 'biz1',
                    name: 'İç-Dış Yıkama',
                    price: 150,
                    duration: 60
                },
                {
                    id: 'srv2',
                    businessId: 'biz2',
                    name: 'Lastik Değişimi (4 Adet)',
                    price: 400,
                    duration: 45
                },
                {
                    id: 'srv3',
                    businessId: 'biz1',
                    name: 'Detaylı İç Temizlik',
                    price: 350,
                    duration: 120
                }
            ];
            
            // Mock kuponlar
            const MOCK_COUPONS = [
                {
                    id: 'coupon1',
                    code: 'YIKAMAFIRSATI',
                    description: 'Araç Yıkama İndirimi',
                    type: 'percent',
                    value: 20,
                    minOrderAmount: 100,
                    maxDiscountAmount: 50,
                    businessId: 'biz1',
                    serviceId: null,
                    startDate: '2023-04-01',
                    endDate: '2023-06-30',
                    usageLimit: 100,
                    usageCount: 12,
                    userUsageLimit: 1,
                    status: 'active',
                    isPublic: true,
                    createdAt: '2023-03-25'
                },
                {
                    id: 'coupon2',
                    code: 'BEDAVABAKIM',
                    description: 'Ücretsiz Motor Bakımı',
                    type: 'free',
                    value: 0,
                    minOrderAmount: 0,
                    maxDiscountAmount: 0,
                    businessId: 'biz2',
                    serviceId: 'srv2',
                    startDate: '2023-05-01',
                    endDate: '2023-05-31',
                    usageLimit: 50,
                    usageCount: 5,
                    userUsageLimit: 1,
                    status: 'active',
                    isPublic: true,
                    createdAt: '2023-04-15'
                }
            ];
            
            // Mock değerlendirmeler
            const MOCK_REVIEWS = [
                {
                    id: 'rev1',
                    customerId: 'user1',
                    businessId: 'biz1',
                    serviceId: 'srv1',
                    appointmentId: 'apt1',
                    rating: 5,
                    comment: 'Harika bir hizmet aldım. Aracım pırıl pırıl oldu. Çalışanlar çok ilgiliydi.',
                    photos: [],
                    reply: 'Değerli yorumunuz için teşekkür ederiz. Tekrar bekleriz.',
                    status: 'approved',
                    adminNote: '',
                    createdAt: '2023-04-16',
                    replyDate: '2023-04-17'
                },
                {
                    id: 'rev2',
                    customerId: 'user1',
                    businessId: 'biz2',
                    serviceId: 'srv2',
                    appointmentId: 'apt2',
                    rating: 4,
                    comment: 'Hızlı servis, iyi fiyat. Sadece biraz beklemek zorunda kaldım.',
                    photos: [],
                    reply: '',
                    status: 'pending',
                    adminNote: '',
                    createdAt: '2023-04-26'
                }
            ];
            
            // Kullanıcı yönetimi
            function updateUsersTable() {
                const usersTable = document.getElementById('users-table');
                if (!usersTable) return;
                
                const tbody = usersTable.querySelector('tbody');
                
                // Tabloyu temizle
                tbody.innerHTML = '';
                
                if (MOCK_USERS.length === 0) {
                    const row = document.createElement('tr');
                    row.innerHTML = '<td colspan="6" class="text-center">Henüz kullanıcı bulunmuyor.</td>';
                    tbody.appendChild(row);
                    return;
                }
                
                // Her bir kullanıcı için satır ekle
                MOCK_USERS.forEach(user => {
                    const row = document.createElement('tr');
                    
                    // Rol adını göster
                    let roleName = user.role === 'admin' ? 'Admin' : 'Kullanıcı';
                    
                    // Durum metni
                    let statusText = '';
                    let statusClass = '';
                    switch(user.status) {
                        case 'active':
                            statusText = 'Aktif';
                            statusClass = 'active';
                            break;
                        case 'inactive':
                            statusText = 'Pasif';
                            statusClass = 'cancelled';
                            break;
                        default:
                            statusText = user.status;
                            statusClass = '';
                    }
                    
                    row.innerHTML = `
                        <td>${user.firstName} ${user.lastName}</td>
                        <td>${user.email}</td>
                        <td>${user.phone}</td>
                        <td>${roleName}</td>
                        <td><span class="status ${statusClass}">${statusText}</span></td>
                        <td class="actions">
                            <button class="btn-action view" title="Görüntüle"><i class="fas fa-eye"></i></button>
                            <button class="btn-action edit" title="Düzenle"><i class="fas fa-edit"></i></button>
                            <button class="btn-action delete" title="Sil"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                });
                
                // Düzenle ve Sil butonlarına event listener ekle
                const deleteButtons = tbody.querySelectorAll('.btn-action.delete');
                
                deleteButtons.forEach((button, index) => {
                    button.addEventListener('click', function() {
                        if (confirm(`${MOCK_USERS[index].firstName} ${MOCK_USERS[index].lastName} kullanıcısını silmek istediğinize emin misiniz?`)) {
                            // Kullanıcıyı sil
                            MOCK_USERS.splice(index, 1);
                            // Tabloyu güncelle
                            updateUsersTable();
                        }
                    });
                });
            }
            
            // Harita modalı
            const mapModal = document.getElementById('map-modal');
            const showMapBtn = document.getElementById('show-map-btn');
            const confirmLocationBtn = document.getElementById('confirm-location');
            const modalMapCloseButtons = document.querySelectorAll('.modal-close');
            const selectedCoordinatesSpan = document.getElementById('selected-coordinates');
            const selectedLocationDiv = document.getElementById('selected-location');
            
            // Harita modalını aç
            if (showMapBtn) {
                showMapBtn.addEventListener('click', function() {
                    mapModal.classList.add('active');
                    
                    // Burada gerçek harita uygulaması kullanılabilir (Google Maps, Leaflet vb.)
                    // Şimdilik sadece simülasyon yapacağız
                    setTimeout(() => {
                        document.getElementById('location-map').innerHTML = `
                            <div style="background-color: #e9ecef; height: 100%; display: flex; justify-content: center; align-items: center;">
                                <p>Harita Simülasyonu - Gerçek projede harita API'si kullanılacak</p>
                            </div>
                        `;
                    }, 500);
                });
            }
            
            // Harita modalını kapat
            modalMapCloseButtons.forEach(button => {
                button.addEventListener('click', function() {
                    mapModal.classList.remove('active');
                });
            });
            
            // Harita dışına tıklandığında kapat
            if (mapModal) {
                mapModal.addEventListener('click', function(e) {
                    if (e.target === mapModal || e.target.classList.contains('modal-overlay')) {
                        mapModal.classList.remove('active');
                    }
                });
            }
            
            // Harita üzerinde bir konum seçme simülasyonu
            if (confirmLocationBtn) {
                confirmLocationBtn.addEventListener('click', function() {
                    // Rasgele koordinat üret (gerçek uygulamada haritadan seçilecek)
                    const lat = (41 + Math.random() * 0.1).toFixed(6);
                    const lng = (29 + Math.random() * 0.1).toFixed(6);
                    
                    // Form alanlarına değerleri yerleştir
                    document.getElementById('business-latitude').value = lat;
                    document.getElementById('business-longitude').value = lng;
                    
                    // Modalı kapat
                    mapModal.classList.remove('active');
                });
            }
            
            // Fotoğraf yükleme işlevleri
            const businessLogo = document.getElementById('business-logo');
            const logoPreview = document.getElementById('logo-preview');
            
            if (businessLogo && logoPreview) {
                businessLogo.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            logoPreview.innerHTML = `<img src="${e.target.result}" alt="Logo Ön İzleme">`;
                        }
                        reader.readAsDataURL(file);
                    }
                });
            }
            
            const businessPhotos = document.getElementById('business-photos');
            const photosPreviewContainer = document.getElementById('photos-preview-container');
            
            if (businessPhotos && photosPreviewContainer) {
                businessPhotos.addEventListener('change', function(e) {
                    const files = e.target.files;
                    photosPreviewContainer.innerHTML = ''; // Önce mevcut önizlemeleri temizle
                    
                    for (let i = 0; i < files.length; i++) {
                        if (i >= 5) break; // En fazla 5 fotoğraf
                        
                        const file = files[i];
                        const reader = new FileReader();
                        
                        reader.onload = function(e) {
                            const previewItem = document.createElement('div');
                            previewItem.className = 'upload-preview-item';
                            previewItem.innerHTML = `
                                <img src="${e.target.result}" alt="Fotoğraf ${i+1}">
                                <div class="upload-preview-remove" data-index="${i}">&times;</div>
                            `;
                            photosPreviewContainer.appendChild(previewItem);
                            
                            // Silme butonuna tıklama olayı ekle
                            previewItem.querySelector('.upload-preview-remove').addEventListener('click', function() {
                                previewItem.remove();
                                // Not: Gerçek uygulamada dosyaları FileList'ten silmek zor olduğundan,
                                // silinen dosyaları bir dizide izlemek daha mantıklı olabilir
                            });
                        }
                        
                        reader.readAsDataURL(file);
                    }
                });
            }
            
            // Randevu yönetimi
            const addAppointmentBtn = document.getElementById('add-appointment-btn');
            const appointmentModal = document.getElementById('appointment-modal');
            const appointmentForm = document.getElementById('appointment-form');
            const saveAppointmentBtn = document.getElementById('save-appointment-btn');
            const appointmentModalTitle = document.getElementById('appointment-modal-title');
            
            // Müşteri ve işletme seçme listelerini doldur
            function populateAppointmentLists() {
                const customerSelect = document.getElementById('appointment-customer');
                const businessSelect = document.getElementById('appointment-business');
                
                if (customerSelect) {
                    customerSelect.innerHTML = '<option value="">Müşteri Seçin</option>';
                    
                    MOCK_USERS.forEach(user => {
                        if (user.role === 'user') {
                            const option = document.createElement('option');
                            option.value = user.id;
                            option.textContent = `${user.firstName} ${user.lastName}`;
                            customerSelect.appendChild(option);
                        }
                    });
                }
                
                if (businessSelect) {
                    businessSelect.innerHTML = '<option value="">İşletme Seçin</option>';
                    
                    MOCK_BUSINESSES.forEach(business => {
                        const option = document.createElement('option');
                        option.value = business.id;
                        option.textContent = business.name;
                        businessSelect.appendChild(option);
                    });
                }
            }
            
            // İşletme değiştiğinde hizmetleri doldur
            document.getElementById('appointment-business')?.addEventListener('change', function() {
                const businessId = this.value;
                const serviceSelect = document.getElementById('appointment-service');
                
                serviceSelect.innerHTML = '<option value="">Hizmet Seçin</option>';
                
                if (businessId) {
                    // Seçilen işletmenin hizmetlerini filtrele
                    const services = MOCK_SERVICES.filter(service => service.businessId === businessId);
                    
                    services.forEach(service => {
                        const option = document.createElement('option');
                        option.value = service.id;
                        option.textContent = `${service.name} (${service.price} TL)`;
                        serviceSelect.appendChild(option);
                    });
                }
            });
            
            // Randevu modalını aç
            if (addAppointmentBtn && appointmentModal) {
                addAppointmentBtn.addEventListener('click', function() {
                    // Formu temizle
                    appointmentForm.reset();
                    document.getElementById('appointment-id').value = '';
                    
                    // Başlığı ayarla
                    appointmentModalTitle.textContent = 'Yeni Randevu Oluştur';
                    
                    // Bugünün tarihini ayarla
                    const today = new Date().toISOString().split('T')[0];
                    document.getElementById('appointment-date').value = today;
                    
                    // Listeleri doldur
                    populateAppointmentLists();
                    
                    // Modalı aç
                    appointmentModal.classList.add('active');
                });
            }
            
            // Modal kapama
            document.querySelectorAll('.modal-close').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.modal').forEach(modal => {
                        modal.classList.remove('active');
                    });
                });
            });
            
            // Randevu kaydet
            if (saveAppointmentBtn) {
                saveAppointmentBtn.addEventListener('click', async function() {
                    try {
                        // Form verilerini al
                        const formData = new FormData(appointmentForm);
                        const appointmentData = {};
                        
                        for (const [key, value] of formData.entries()) {
                            appointmentData[key] = value;
                        }
                        
                        // Validation
                        if (!appointmentData.customerId || !appointmentData.businessId || 
                            !appointmentData.serviceId || !appointmentData.date || 
                            !appointmentData.time || !appointmentData.status) {
                            alert('Lütfen tüm zorunlu alanları doldurun!');
                            return;
                        }
                        
                        // Düğmeyi devre dışı bırak
                        saveAppointmentBtn.disabled = true;
                        saveAppointmentBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Kaydediliyor...';
                        
                        // Mock API çağrısı - gerçek API olmadığı için
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        // ID var mı kontrol et (güncelleme mi, ekleme mi?)
                        const appointmentId = appointmentData.id;
                        let isNew = true;
                        
                        if (appointmentId) {
                            // Güncelleme
                            const index = MOCK_APPOINTMENTS.findIndex(apt => apt.id === appointmentId);
                            if (index !== -1) {
                                isNew = false;
                                // Hizmet adını al
                                const service = MOCK_SERVICES.find(s => s.id === appointmentData.serviceId);
                                appointmentData.serviceName = service ? service.name : '';
                                
                                // Mevcut randevuyu güncelle
                                MOCK_APPOINTMENTS[index] = {
                                    ...MOCK_APPOINTMENTS[index],
                                    ...appointmentData
                                };
                            }
                        }
                        
                        if (isNew) {
                            // Yeni randevu
                            const service = MOCK_SERVICES.find(s => s.id === appointmentData.serviceId);
                            
                            const newAppointment = {
                                id: 'apt' + (MOCK_APPOINTMENTS.length + 1),
                                customerId: appointmentData.customerId,
                                businessId: appointmentData.businessId,
                                serviceId: appointmentData.serviceId,
                                serviceName: service ? service.name : '',
                                date: appointmentData.date,
                                time: appointmentData.time,
                                status: appointmentData.status,
                                notes: appointmentData.notes || '',
                                createdAt: new Date().toISOString().split('T')[0]
                            };
                            
                            MOCK_APPOINTMENTS.push(newAppointment);
                        }
                        
                        // Modalı kapat
                        appointmentModal.classList.remove('active');
                        
                        // Randevuları güncelle
                        updateAppointmentsTable();
                        
                    } catch (error) {
                        console.error('Randevu kaydedilirken hata:', error);
                        alert('Randevu kaydedilirken bir hata oluştu: ' + error.message);
                    } finally {
                        // Düğmeyi tekrar aktif et
                        saveAppointmentBtn.disabled = false;
                        saveAppointmentBtn.innerHTML = 'Kaydet';
                    }
                });
            }
            
            // Randevular tablosunu güncelle
            function updateAppointmentsTable() {
                const appointmentsTable = document.getElementById('appointments-table');
                if (!appointmentsTable) return;
                
                const tbody = appointmentsTable.querySelector('tbody');
                
                // Tabloyu temizle
                tbody.innerHTML = '';
                
                if (MOCK_APPOINTMENTS.length === 0) {
                    const row = document.createElement('tr');
                    row.innerHTML = '<td colspan="8" class="text-center">Henüz randevu bulunmuyor.</td>';
                    tbody.appendChild(row);
                    return;
                }
                
                // Her bir randevu için satır ekle
                MOCK_APPOINTMENTS.forEach((appointment, index) => {
                    const row = document.createElement('tr');
                    
                    // Müşteri adını bul
                    const customer = MOCK_USERS.find(user => user.id === appointment.customerId);
                    const customerName = customer ? `${customer.firstName} ${customer.lastName}` : 'Bilinmeyen Müşteri';
                    
                    // İşletme adını bul
                    const business = MOCK_BUSINESSES.find(business => business.id === appointment.businessId);
                    const businessName = business ? business.name : 'Bilinmeyen İşletme';
                    
                    // Durum metni
                    let statusText = '';
                    let statusClass = '';
                    switch(appointment.status) {
                        case 'pending':
                            statusText = 'Bekleyen';
                            statusClass = 'pending';
                            break;
                        case 'confirmed':
                            statusText = 'Onaylanmış';
                            statusClass = 'active';
                            break;
                        case 'completed':
                            statusText = 'Tamamlanmış';
                            statusClass = 'completed'; // Yeni sınıf ekle
                            break;
                        case 'cancelled':
                            statusText = 'İptal Edilmiş';
                            statusClass = 'cancelled';
                            break;
                        default:
                            statusText = appointment.status;
                            statusClass = '';
                    }
                    
                    row.innerHTML = `
                        <td>#${appointment.id}</td>
                        <td>${customerName}</td>
                        <td>${businessName}</td>
                        <td>${appointment.serviceName}</td>
                        <td>${appointment.date}</td>
                        <td>${appointment.time}</td>
                        <td><span class="status ${statusClass}">${statusText}</span></td>
                        <td class="actions">
                            <button class="btn-action view" title="Görüntüle"><i class="fas fa-eye"></i></button>
                            <button class="btn-action edit" title="Düzenle"><i class="fas fa-edit"></i></button>
                            <button class="btn-action delete" title="İptal Et"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                    
                    // Düzenle butonuna olay dinleyici ekle
                    const editButton = row.querySelector('.btn-action.edit');
                    editButton.addEventListener('click', function() {
                        editAppointment(appointment.id);
                    });
                    
                    // Silme butonuna olay dinleyici ekle
                    const deleteButton = row.querySelector('.btn-action.delete');
                    deleteButton.addEventListener('click', function() {
                        if (confirm(`${appointment.id} numaralı randevuyu iptal etmek istediğinize emin misiniz?`)) {
                            // Randevuyu iptal et (gerçekte silmek yerine durumunu güncelle)
                            appointment.status = 'cancelled';
                            updateAppointmentsTable();
                        }
                    });
                });
            }
            
            // Randevu düzenleme
            function editAppointment(appointmentId) {
                const appointment = MOCK_APPOINTMENTS.find(apt => apt.id === appointmentId);
                if (!appointment) return;
                
                // Başlığı ayarla
                appointmentModalTitle.textContent = 'Randevu Düzenle';
                
                // Listeleri doldur
                populateAppointmentLists();
                
                // Form verilerini ayarla
                document.getElementById('appointment-id').value = appointment.id;
                document.getElementById('appointment-customer').value = appointment.customerId;
                document.getElementById('appointment-business').value = appointment.businessId;
                
                // İşletme değişikliğini tetikle ve hizmetleri yükle
                const businessSelect = document.getElementById('appointment-business');
                businessSelect.dispatchEvent(new Event('change'));
                
                // Kısa bir gecikmeyle hizmet seçimini ayarla (hizmetlerin yüklenmesi için)
                setTimeout(() => {
                    document.getElementById('appointment-service').value = appointment.serviceId;
                }, 100);
                
                document.getElementById('appointment-date').value = appointment.date;
                document.getElementById('appointment-time').value = appointment.time;
                document.getElementById('appointment-notes').value = appointment.notes || '';
                document.getElementById('appointment-status').value = appointment.status;
                
                // Modalı aç
                appointmentModal.classList.add('active');
            }
            
            // Randevu filtresi
            const appointmentStatusFilter = document.getElementById('appointment-status-filter');
            const appointmentDateFilter = document.getElementById('appointment-date-filter');
            const appointmentSearch = document.getElementById('appointment-search');
            
            // Filtreler değiştiğinde olayları dinle
            [appointmentStatusFilter, appointmentDateFilter, appointmentSearch].forEach(filter => {
                if (filter) {
                    filter.addEventListener('change', filterAppointments);
                    filter.addEventListener('keyup', filterAppointments);
                }
            });
            
            // Randevuları filtrele
            function filterAppointments() {
                // TODO: Gerçek uygulamada, bu fonksiyon backend'e filtre parametreleri gönderir
                // Burada mock veriyi filtreleyeceğiz
                console.log('Randevular filtreleniyor...');
            }
            
            // CSS sınıfı ekle
            document.head.insertAdjacentHTML('beforeend', `
                <style>
                    .status.completed {
                        background-color: rgba(46, 204, 113, 0.1);
                        color: #2ecc71;
                    }
                </style>
            `);
            
            // Sayfa yüklendiğinde tabloları güncelle
            updateBusinessesTable();
            updateUsersTable();
            updateAppointmentsTable();
            
            // Mock kategoriler
            const MOCK_CATEGORIES = [
                {
                    id: 'cat1',
                    name: 'Araç Yıkama',
                    slug: 'arac-yikama',
                    icon: 'fa-tint',
                    color: '#4caf50',
                    description: 'Araç yıkama ve detaylı temizlik hizmetleri',
                    businessCount: 12
                },
                {
                    id: 'cat2',
                    name: 'Lastik Değişimi',
                    slug: 'lastik-degisim',
                    icon: 'fa-tire',
                    color: '#ff9800',
                    description: 'Lastik değişimi ve bakım hizmetleri',
                    businessCount: 8
                },
                {
                    id: 'cat3',
                    name: 'Ekspertiz',
                    slug: 'ekspertiz',
                    icon: 'fa-search',
                    color: '#2196f3',
                    description: 'Araç ekspertiz ve kontrol hizmetleri',
                    businessCount: 5
                },
                {
                    id: 'cat4',
                    name: 'Otopark',
                    slug: 'otopark',
                    icon: 'fa-parking',
                    color: '#9c27b0',
                    description: 'Araç park alanları ve otopark hizmetleri',
                    businessCount: 7
                }
            ];
            
            // Kategori yönetimi
            const categoryForm = document.getElementById('category-form');
            const categoryFormTitle = document.getElementById('category-form-title');
            const addCategoryBtn = document.getElementById('add-category-btn');
            const categoryCancelBtn = document.getElementById('category-cancel-btn');
            const categorySuccessAlert = document.getElementById('category-success-alert');
            const categoryErrorAlert = document.getElementById('category-error-alert');
            const categoryIconInput = document.getElementById('category-icon');
            const iconPreview = document.getElementById('icon-preview');
            const categoryColorInput = document.getElementById('category-color');
            const categoryColorHex = document.getElementById('category-color-hex');
            
            // İkon önizleme
            if (categoryIconInput && iconPreview) {
                categoryIconInput.addEventListener('input', function() {
                    const iconClass = this.value;
                    iconPreview.className = '';
                    iconPreview.classList.add('fas', iconClass);
                });
            }
            
            // Renk önizleme
            if (categoryColorInput && categoryColorHex) {
                categoryColorInput.addEventListener('input', function() {
                    categoryColorHex.value = this.value;
                });
            }
            
            // Kategorileri tabloya ekle
            function updateCategoriesTable() {
                const categoriesTable = document.getElementById('categories-table');
                if (!categoriesTable) return;
                
                const tbody = categoriesTable.querySelector('tbody');
                tbody.innerHTML = '';
                
                if (MOCK_CATEGORIES.length === 0) {
                    const row = document.createElement('tr');
                    row.innerHTML = '<td colspan="6" class="text-center">Henüz kategori bulunmuyor.</td>';
                    tbody.appendChild(row);
                    return;
                }
                
                MOCK_CATEGORIES.forEach(category => {
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td>${category.id}</td>
                        <td>${category.name}</td>
                        <td><i class="fas ${category.icon}" style="color: ${category.color};"></i> ${category.icon}</td>
                        <td>
                            <div class="d-flex align-items-center">
                                <div style="width: 24px; height: 24px; background-color: ${category.color}; border-radius: 4px; margin-right: 8px;"></div>
                                ${category.color}
                            </div>
                        </td>
                        <td>${category.businessCount}</td>
                        <td class="actions">
                            <button class="btn-action edit" title="Düzenle" data-id="${category.id}"><i class="fas fa-edit"></i></button>
                            <button class="btn-action delete" title="Sil" data-id="${category.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                });
                
                // Edit butonlarına olay ekle
                categoriesTable.querySelectorAll('.btn-action.edit').forEach(button => {
                    button.addEventListener('click', function() {
                        const categoryId = this.getAttribute('data-id');
                        editCategory(categoryId);
                    });
                });
                
                // Delete butonlarına olay ekle
                categoriesTable.querySelectorAll('.btn-action.delete').forEach(button => {
                    button.addEventListener('click', function() {
                        const categoryId = this.getAttribute('data-id');
                        deleteCategory(categoryId);
                    });
                });
            }
            
            // Kategori düzenleme
            function editCategory(categoryId) {
                const category = MOCK_CATEGORIES.find(cat => cat.id === categoryId);
                if (!category) return;
                
                document.getElementById('category-id').value = category.id;
                document.getElementById('category-name').value = category.name;
                document.getElementById('category-slug').value = category.slug;
                document.getElementById('category-icon').value = category.icon;
                document.getElementById('category-color').value = category.color;
                document.getElementById('category-color-hex').value = category.color;
                document.getElementById('category-description').value = category.description || '';
                
                // İkon önizlemeyi güncelle
                iconPreview.className = '';
                iconPreview.classList.add('fas', category.icon);
                
                // Başlığı güncelle
                categoryFormTitle.textContent = 'Kategori Düzenle';
                
                // Form alanına scroll
                categoryForm.scrollIntoView({ behavior: 'smooth' });
            }
            
            // Kategori silme
            function deleteCategory(categoryId) {
                const category = MOCK_CATEGORIES.find(cat => cat.id === categoryId);
                if (!category) return;
                
                if (confirm(`"${category.name}" kategorisini silmek istediğinize emin misiniz?`)) {
                    // Kategoriyi sil
                    const index = MOCK_CATEGORIES.findIndex(cat => cat.id === categoryId);
                    if (index !== -1) {
                        MOCK_CATEGORIES.splice(index, 1);
                        
                        // Başarı mesajı
                        categorySuccessAlert.textContent = 'Kategori başarıyla silindi.';
                        categorySuccessAlert.style.display = 'block';
                        categoryErrorAlert.style.display = 'none';
                        
                        // 3 saniye sonra mesajı kapat
                        setTimeout(() => {
                            categorySuccessAlert.style.display = 'none';
                        }, 3000);
                        
                        // Tabloyu güncelle
                        updateCategoriesTable();
                    }
                }
            }
            
            // Formu temizle
            function resetCategoryForm() {
                categoryForm.reset();
                document.getElementById('category-id').value = '';
                document.getElementById('category-icon').value = 'fa-car';
                document.getElementById('category-color').value = '#0066cc';
                document.getElementById('category-color-hex').value = '#0066cc';
                
                // İkon önizlemeyi sıfırla
                iconPreview.className = '';
                iconPreview.classList.add('fas', 'fa-car');
                
                // Başlığı güncelle
                categoryFormTitle.textContent = 'Yeni Kategori Ekle';
            }
            
            // Yeni kategori ekleme butonuna tıklandığında
            if (addCategoryBtn) {
                addCategoryBtn.addEventListener('click', function() {
                    resetCategoryForm();
                    // Form alanına scroll
                    categoryForm.scrollIntoView({ behavior: 'smooth' });
                });
            }
            
            // İptal butonuna tıklandığında
            if (categoryCancelBtn) {
                categoryCancelBtn.addEventListener('click', function() {
                    resetCategoryForm();
                });
            }
            
            // Kategori formu gönderildiğinde
            if (categoryForm) {
                categoryForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    try {
                        // Form verilerini al
                        const formData = new FormData(categoryForm);
                        const categoryData = {};
                        
                        for (const [key, value] of formData.entries()) {
                            categoryData[key] = value;
                        }
                        
                        // Submit butonunu devre dışı bırak
                        const submitButton = categoryForm.querySelector('button[type="submit"]');
                        submitButton.disabled = true;
                        submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Kaydediliyor...';
                        
                        // Gecikme simülasyonu
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        const categoryId = categoryData.id;
                        
                        if (categoryId) {
                            // Mevcut kategoriyi güncelle
                            const index = MOCK_CATEGORIES.findIndex(cat => cat.id === categoryId);
                            if (index !== -1) {
                                // İşletme sayısını koru
                                const businessCount = MOCK_CATEGORIES[index].businessCount;
                                
                                MOCK_CATEGORIES[index] = {
                                    ...categoryData,
                                    businessCount
                                };
                                
                                // Başarı mesajı
                                categorySuccessAlert.textContent = 'Kategori başarıyla güncellendi.';
                            }
                        } else {
                            // Yeni kategori ekle
                            const newCategory = {
                                id: 'cat' + (MOCK_CATEGORIES.length + 1),
                                name: categoryData.name,
                                slug: categoryData.slug,
                                icon: categoryData.icon,
                                color: categoryData.color,
                                description: categoryData.description,
                                businessCount: 0
                            };
                            
                            MOCK_CATEGORIES.push(newCategory);
                            
                            // Başarı mesajı
                            categorySuccessAlert.textContent = 'Kategori başarıyla eklendi.';
                        }
                        
                        // Başarı mesajını göster
                        categorySuccessAlert.style.display = 'block';
                        categoryErrorAlert.style.display = 'none';
                        
                        // Formu temizle
                        resetCategoryForm();
                        
                        // Tabloyu güncelle
                        updateCategoriesTable();
                        
                        // 3 saniye sonra mesajı kapat
                        setTimeout(() => {
                            categorySuccessAlert.style.display = 'none';
                        }, 3000);
                        
                    } catch (error) {
                        // Hata mesajı
                        categoryErrorAlert.textContent = error.message || 'Kategori kaydedilirken bir hata oluştu.';
                        categoryErrorAlert.style.display = 'block';
                        categorySuccessAlert.style.display = 'none';
                    } finally {
                        // Submit butonunu tekrar aktif et
                        const submitButton = categoryForm.querySelector('button[type="submit"]');
                        submitButton.disabled = false;
                        submitButton.innerHTML = '<i class="fas fa-save"></i> Kaydet';
                    }
                });
            }
            
            // Sayfa yüklendiğinde tabloları güncelle
            updateUsersTable();
            
            // Kupon Yönetimi Fonksiyonları
            
            // Rastgele kupon kodu oluştur
            function generateCouponCode() {
                const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
                let code = '';
                for (let i = 0; i < 8; i++) {
                    const randomIndex = Math.floor(Math.random() * chars.length);
                    code += chars[randomIndex];
                }
                return code;
            }
            
            // Kod oluşturma butonuna tıklama
            const generateCodeBtn = document.getElementById('generate-code-btn');
            const couponCodeInput = document.getElementById('coupon-code');
            
            if (generateCodeBtn && couponCodeInput) {
                generateCodeBtn.addEventListener('click', function() {
                    couponCodeInput.value = generateCouponCode();
                });
            }
            
            // İndirim türü değiştiğinde değer sembolünü güncelle
            const couponTypeSelect = document.getElementById('coupon-type');
            const couponValueSymbol = document.getElementById('coupon-value-symbol');
            const couponValueInput = document.getElementById('coupon-value');
            
            if (couponTypeSelect && couponValueSymbol) {
                couponTypeSelect.addEventListener('change', function() {
                    const type = this.value;
                    
                    switch(type) {
                        case 'percent':
                            couponValueSymbol.textContent = '%';
                            couponValueInput.removeAttribute('readonly');
                            break;
                        case 'fixed':
                            couponValueSymbol.textContent = 'TL';
                            couponValueInput.removeAttribute('readonly');
                            break;
                        case 'free':
                            couponValueSymbol.textContent = '';
                            couponValueInput.value = '0';
                            couponValueInput.setAttribute('readonly', 'readonly');
                            break;
                    }
                });
            }
            
            // İşletme seçildiğinde hizmet dropdown'ını aktifleştir
            const couponBusinessSelect = document.getElementById('coupon-business');
            const couponServiceSelect = document.getElementById('coupon-service');
            
            if (couponBusinessSelect && couponServiceSelect) {
                couponBusinessSelect.addEventListener('change', function() {
                    const businessId = this.value;
                    
                    // Hizmet select'ini temizle
                    couponServiceSelect.innerHTML = '<option value="">Tüm Hizmetler</option>';
                    
                    if (businessId) {
                        // Seçili işletmeye ait hizmetleri filtrele
                        const businessServices = MOCK_SERVICES.filter(service => service.businessId === businessId);
                        
                        // Hizmetleri select'e ekle
                        businessServices.forEach(service => {
                            const option = document.createElement('option');
                            option.value = service.id;
                            option.textContent = service.name + ' (' + service.price + ' TL)';
                            couponServiceSelect.appendChild(option);
                        });
                        
                        // Hizmet seçimini aktifleştir
                        couponServiceSelect.disabled = false;
                    } else {
                        // Hizmet seçimini devre dışı bırak
                        couponServiceSelect.disabled = true;
                    }
                });
                
                // Sayfa açıldığında işletmeleri doldur
                couponBusinessSelect.innerHTML = '<option value="">Tüm İşletmeler</option>';
                MOCK_BUSINESSES.forEach(business => {
                    const option = document.createElement('option');
                    option.value = business.id;
                    option.textContent = business.name;
                    couponBusinessSelect.appendChild(option);
                });
            }
            
            // Kupon ekleme formu
            const addCouponForm = document.getElementById('add-coupon-form');
            const couponSuccessAlert = document.getElementById('coupon-success-alert');
            const couponErrorAlert = document.getElementById('coupon-error-alert');
            
            if (addCouponForm) {
                // Bugünün tarihini varsayılan olarak ayarla
                const today = new Date().toISOString().split('T')[0];
                const nextMonth = new Date();
                nextMonth.setMonth(nextMonth.getMonth() + 1);
                
                document.getElementById('coupon-start-date').value = today;
                document.getElementById('coupon-end-date').value = nextMonth.toISOString().split('T')[0];
                
                // Form gönderildiğinde
                addCouponForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    try {
                        // Form verilerini al
                        const formData = new FormData(addCouponForm);
                        const couponData = {};
                        
                        for (const [key, value] of formData.entries()) {
                            if (key === 'isPublic') {
                                couponData[key] = formData.has(key); // Checkbox değeri
                            } else {
                                couponData[key] = value;
                            }
                        }
                        
                        // Validasyon
                        if (!couponData.code) {
                            throw new Error('Kupon kodu gereklidir!');
                        }
                        
                        if (!couponData.description) {
                            throw new Error('Kupon açıklaması gereklidir!');
                        }
                        
                        // Tarih kontrolü
                        const startDate = new Date(couponData.startDate);
                        const endDate = new Date(couponData.endDate);
                        
                        if (startDate > endDate) {
                            throw new Error('Bitiş tarihi başlangıç tarihinden sonra olmalıdır!');
                        }
                        
                        // Submit butonunu devre dışı bırak
                        const submitButton = addCouponForm.querySelector('button[type="submit"]');
                        submitButton.disabled = true;
                        submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Kaydediliyor...';
                        
                        // Mock API - gerçek API olmadığı için
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        const couponId = couponData.id;
                        
                        if (couponId) {
                            // Mevcut kuponu güncelle
                            const index = MOCK_COUPONS.findIndex(c => c.id === couponId);
                            if (index !== -1) {
                                // Kullanım sayısını koru
                                const usageCount = MOCK_COUPONS[index].usageCount;
                                
                                MOCK_COUPONS[index] = {
                                    ...couponData,
                                    usageCount,
                                };
                                
                                // Başarı mesajı
                                couponSuccessAlert.textContent = 'Kupon başarıyla güncellendi!';
                            }
                        } else {
                            // Yeni kupon ekle
                            const newCoupon = {
                                id: 'coupon' + (MOCK_COUPONS.length + 1),
                                code: couponData.code,
                                description: couponData.description,
                                type: couponData.type,
                                value: couponData.value,
                                minOrderAmount: couponData.minOrderAmount || 0,
                                maxDiscountAmount: couponData.maxDiscountAmount || 0,
                                businessId: couponData.businessId || null,
                                serviceId: couponData.serviceId || null,
                                startDate: couponData.startDate,
                                endDate: couponData.endDate,
                                usageLimit: couponData.usageLimit || 0,
                                usageCount: 0,
                                userUsageLimit: couponData.userUsageLimit || 1,
                                status: couponData.status,
                                isPublic: couponData.isPublic,
                                createdAt: new Date().toISOString()
                            };
                            
                            MOCK_COUPONS.push(newCoupon);
                            
                            // Başarı mesajı
                            couponSuccessAlert.textContent = 'Kupon başarıyla eklendi!';
                        }
                        
                        // Başarı mesajını göster
                        couponSuccessAlert.style.display = 'block';
                        couponErrorAlert.style.display = 'none';
                        
                        // 3 saniye sonra kupon listesine yönlendir
                        setTimeout(() => {
                            document.querySelector('.sidebar-link[data-section="coupons"]').click();
                            // Başarı mesajını gizle
                            couponSuccessAlert.style.display = 'none';
                        }, 3000);
                        
                        // Formu temizle
                        resetCouponForm();
                        
                        // Kuponlar tablosunu güncelle
                        updateCouponsTable();
                        
                    } catch (error) {
                        // Hata mesajını göster
                        couponErrorAlert.textContent = error.message || 'Kupon eklenirken bir hata oluştu.';
                        couponErrorAlert.style.display = 'block';
                        couponSuccessAlert.style.display = 'none';
                    } finally {
                        // Submit butonunu tekrar aktif et
                        const submitButton = addCouponForm.querySelector('button[type="submit"]');
                        submitButton.disabled = false;
                        submitButton.innerHTML = '<i class="fas fa-save"></i> Kuponu Kaydet';
                    }
                });
            }
            
            // Kupon formu temizle
            function resetCouponForm() {
                if (!addCouponForm) return;
                
                addCouponForm.reset();
                document.getElementById('coupon-id').value = '';
                
                // Bugünün tarihini varsayılan olarak ayarla
                const today = new Date().toISOString().split('T')[0];
                const nextMonth = new Date();
                nextMonth.setMonth(nextMonth.getMonth() + 1);
                
                document.getElementById('coupon-start-date').value = today;
                document.getElementById('coupon-end-date').value = nextMonth.toISOString().split('T')[0];
                
                // İndirim türünü yüzde olarak ayarla
                document.getElementById('coupon-type').value = 'percent';
                document.getElementById('coupon-value-symbol').textContent = '%';
                
                // Hizmet dropdown'ını devre dışı bırak
                document.getElementById('coupon-service').disabled = true;
            }
            
            // Kuponlar tablosunu güncelle
            function updateCouponsTable() {
                const couponsTable = document.getElementById('coupons-table');
                if (!couponsTable) return;
                
                const tbody = couponsTable.querySelector('tbody');
                
                // Tabloyu temizle
                tbody.innerHTML = '';
                
                if (MOCK_COUPONS.length === 0) {
                    const row = document.createElement('tr');
                    row.innerHTML = '<td colspan="9" class="text-center">Henüz kupon bulunmuyor.</td>';
                    tbody.appendChild(row);
                    return;
                }
                
                // Filtrelemeleri al
                const searchText = document.getElementById('coupon-search')?.value.toLowerCase() || '';
                const typeFilter = document.getElementById('coupon-type-filter')?.value || '';
                const statusFilter = document.getElementById('coupon-status-filter')?.value || '';
                
                // Filtrelenmiş kuponları al
                let filteredCoupons = MOCK_COUPONS;
                
                if (searchText) {
                    filteredCoupons = filteredCoupons.filter(coupon => 
                        coupon.code.toLowerCase().includes(searchText) || 
                        coupon.description.toLowerCase().includes(searchText)
                    );
                }
                
                if (typeFilter) {
                    filteredCoupons = filteredCoupons.filter(coupon => coupon.type === typeFilter);
                }
                
                if (statusFilter) {
                    if (statusFilter === 'expired') {
                        // Süresi dolmuş kuponları filtrele
                        const today = new Date();
                        filteredCoupons = filteredCoupons.filter(coupon => 
                            new Date(coupon.endDate) < today
                        );
                    } else {
                        filteredCoupons = filteredCoupons.filter(coupon => coupon.status === statusFilter);
                    }
                }
                
                // Her bir kupon için satır ekle
                filteredCoupons.forEach(coupon => {
                    const row = document.createElement('tr');
                    
                    // İşletme adını bul
                    let businessName = 'Tüm İşletmeler';
                    if (coupon.businessId) {
                        const business = MOCK_BUSINESSES.find(b => b.id === coupon.businessId);
                        if (business) {
                            businessName = business.name;
                        }
                    }
                    
                    // İndirim türünü ve değerini göster
                    let discountTypeText = '';
                    let discountValueText = '';
                    
                    switch(coupon.type) {
                        case 'percent':
                            discountTypeText = 'Yüzde İndirim';
                            discountValueText = `%${coupon.value}`;
                            break;
                        case 'fixed':
                            discountTypeText = 'Sabit İndirim';
                            discountValueText = `${coupon.value} TL`;
                            break;
                        case 'free':
                            discountTypeText = 'Ücretsiz Hizmet';
                            discountValueText = 'Ücretsiz';
                            break;
                    }
                    
                    // Durum kontrolü
                    let statusText = '';
                    let statusClass = '';
                    
                    const today = new Date();
                    const endDate = new Date(coupon.endDate);
                    
                    if (endDate < today) {
                        statusText = 'Süresi Dolmuş';
                        statusClass = 'cancelled';
                    } else {
                        switch(coupon.status) {
                            case 'active':
                                statusText = 'Aktif';
                                statusClass = 'active';
                                break;
                            case 'inactive':
                                statusText = 'Pasif';
                                statusClass = 'cancelled';
                                break;
                            default:
                                statusText = coupon.status;
                                statusClass = '';
                        }
                    }
                    
                    // Kullanım limiti
                    let usageLimitText = coupon.usageLimit ? `${coupon.usageCount}/${coupon.usageLimit}` : 'Limitsiz';
                    
                    row.innerHTML = `
                        <td><strong>${coupon.code}</strong></td>
                        <td>${coupon.description}</td>
                        <td>${discountTypeText}</td>
                        <td>${discountValueText}</td>
                        <td>${businessName}</td>
                        <td>${usageLimitText}</td>
                        <td>${formatDate(coupon.endDate)}</td>
                        <td><span class="status ${statusClass}">${statusText}</span></td>
                        <td class="actions">
                            <button class="btn-action view" title="Görüntüle" data-id="${coupon.id}"><i class="fas fa-eye"></i></button>
                            <button class="btn-action edit" title="Düzenle" data-id="${coupon.id}"><i class="fas fa-edit"></i></button>
                            <button class="btn-action delete" title="Sil" data-id="${coupon.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                });
                
                // Kupon görüntüleme işlemi
                const viewButtons = tbody.querySelectorAll('.btn-action.view');
                viewButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const couponId = this.getAttribute('data-id');
                        viewCoupon(couponId);
                    });
                });
                
                // Kupon düzenleme işlemi
                const editButtons = tbody.querySelectorAll('.btn-action.edit');
                editButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const couponId = this.getAttribute('data-id');
                        editCoupon(couponId);
                    });
                });
                
                // Kupon silme işlemi
                const deleteButtons = tbody.querySelectorAll('.btn-action.delete');
                deleteButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const couponId = this.getAttribute('data-id');
                        deleteCoupon(couponId);
                    });
                });
            }
            
            // Tarih biçimlendirme fonksiyonu
            function formatDate(dateString) {
                const date = new Date(dateString);
                return `${date.getDate().toString().padStart(2, '0')}.${(date.getMonth() + 1).toString().padStart(2, '0')}.${date.getFullYear()}`;
            }
            
            // Kupon görüntüleme
            function viewCoupon(couponId) {
                const coupon = MOCK_COUPONS.find(c => c.id === couponId);
                if (!coupon) {
                    alert('Kupon bulunamadı!');
                    return;
                }
                
                // Burada bir modal açılabilir
                alert(`${coupon.code} - ${coupon.description} - Detaylı görüntüleme özelliği yakında eklenecek.`);
            }
            
            // Kupon düzenleme
            function editCoupon(couponId) {
                const coupon = MOCK_COUPONS.find(c => c.id === couponId);
                if (!coupon) {
                    alert('Kupon bulunamadı!');
                    return;
                }
                
                // Kupon ekleme sayfasına yönlendirme
                document.querySelector('.sidebar-link[data-section="add-coupon"]').click();
                
                // Formu doldur
                document.getElementById('coupon-id').value = coupon.id;
                document.getElementById('coupon-code').value = coupon.code;
                document.getElementById('coupon-description').value = coupon.description;
                document.getElementById('coupon-type').value = coupon.type;
                document.getElementById('coupon-value').value = coupon.value;
                document.getElementById('coupon-min-order').value = coupon.minOrderAmount;
                document.getElementById('coupon-max-discount').value = coupon.maxDiscountAmount;
                
                // İndirim türünü ve değer sembolünü güncelle
                const couponValueSymbol = document.getElementById('coupon-value-symbol');
                switch(coupon.type) {
                    case 'percent':
                        couponValueSymbol.textContent = '%';
                        document.getElementById('coupon-value').removeAttribute('readonly');
                        break;
                    case 'fixed':
                        couponValueSymbol.textContent = 'TL';
                        document.getElementById('coupon-value').removeAttribute('readonly');
                        break;
                    case 'free':
                        couponValueSymbol.textContent = '';
                        document.getElementById('coupon-value').value = '0';
                        document.getElementById('coupon-value').setAttribute('readonly', 'readonly');
                        break;
                }
                
                // İşletme ve hizmet seçimi
                document.getElementById('coupon-business').value = coupon.businessId || '';
                
                // İşletme seçildiyse, ilgili hizmetleri yükle
                if (coupon.businessId) {
                    // Hizmet select'ini temizle
                    const couponServiceSelect = document.getElementById('coupon-service');
                    couponServiceSelect.innerHTML = '<option value="">Tüm Hizmetler</option>';
                    
                    // Seçili işletmeye ait hizmetleri filtrele
                    const businessServices = MOCK_SERVICES.filter(service => service.businessId === coupon.businessId);
                    
                    // Hizmetleri select'e ekle
                    businessServices.forEach(service => {
                        const option = document.createElement('option');
                        option.value = service.id;
                        option.textContent = service.name + ' (' + service.price + ' TL)';
                        couponServiceSelect.appendChild(option);
                    });
                    
                    // Hizmet seçimini aktifleştir
                    couponServiceSelect.disabled = false;
                    
                    // Hizmet seçimi
                    couponServiceSelect.value = coupon.serviceId || '';
                }
                
                document.getElementById('coupon-start-date').value = coupon.startDate;
                document.getElementById('coupon-end-date').value = coupon.endDate;
                document.getElementById('coupon-usage-limit').value = coupon.usageLimit;
                document.getElementById('coupon-user-usage-limit').value = coupon.userUsageLimit;
                document.getElementById('coupon-status').value = coupon.status;
                document.getElementById('coupon-public').checked = coupon.isPublic;
                
                // Başlığı güncelle
                document.querySelector('#add-coupon .admin-header h1').textContent = 'Kupon Düzenle';
            }
            
            // Kupon silme
            function deleteCoupon(couponId) {
                const coupon = MOCK_COUPONS.find(c => c.id === couponId);
                if (!coupon) {
                    alert('Kupon bulunamadı!');
                    return;
                }
                
                if (confirm(`"${coupon.code}" kuponunu silmek istediğinize emin misiniz?`)) {
                    // Kuponu bul ve sil
                    const index = MOCK_COUPONS.findIndex(c => c.id === couponId);
                    if (index !== -1) {
                        MOCK_COUPONS.splice(index, 1);
                        
                        // Tabloyu güncelle
                        updateCouponsTable();
                        
                        // Bildirim göster
                        alert('Kupon başarıyla silindi!');
                    }
                }
            }
            
            // Kupon filtreleme olaylarını ekle
            const couponSearchInput = document.getElementById('coupon-search');
            const couponTypeFilter = document.getElementById('coupon-type-filter');
            const couponStatusFilter = document.getElementById('coupon-status-filter');
            
            if (couponSearchInput) {
                couponSearchInput.addEventListener('input', updateCouponsTable);
            }
            
            if (couponTypeFilter) {
                couponTypeFilter.addEventListener('change', updateCouponsTable);
            }
            
            if (couponStatusFilter) {
                couponStatusFilter.addEventListener('change', updateCouponsTable);
            }
            
            // Sayfa yüklendiğinde kuponlar tablosunu güncelle
            updateCouponsTable();
            
            // Değerlendirmeler Yönetimi Fonksiyonları
            
            // Değerlendirmeler tablosunu güncelle
            function updateReviewsTable() {
                const reviewsTable = document.getElementById('reviews-table');
                if (!reviewsTable) return;
                
                const tbody = reviewsTable.querySelector('tbody');
                
                // Tabloyu temizle
                tbody.innerHTML = '';
                
                if (MOCK_REVIEWS.length === 0) {
                    const row = document.createElement('tr');
                    row.innerHTML = '<td colspan="8" class="text-center">Henüz değerlendirme bulunmuyor.</td>';
                    tbody.appendChild(row);
                    return;
                }
                
                // Filtrelemeleri al
                const searchText = document.getElementById('review-search')?.value.toLowerCase() || '';
                const businessFilter = document.getElementById('review-business-filter')?.value || '';
                const ratingFilter = document.getElementById('review-rating-filter')?.value || '';
                const statusFilter = document.getElementById('review-status-filter')?.value || '';
                
                // Filtrelenmiş değerlendirmeleri al
                let filteredReviews = MOCK_REVIEWS;
                
                if (searchText) {
                    filteredReviews = filteredReviews.filter(review => {
                        const customer = MOCK_USERS.find(u => u.id === review.customerId);
                        const business = MOCK_BUSINESSES.find(b => b.id === review.businessId);
                        
                        return (customer && `${customer.firstName} ${customer.lastName}`.toLowerCase().includes(searchText)) ||
                               (business && business.name.toLowerCase().includes(searchText)) ||
                               (review.comment && review.comment.toLowerCase().includes(searchText));
                    });
                }
                
                if (businessFilter) {
                    filteredReviews = filteredReviews.filter(review => review.businessId === businessFilter);
                }
                
                if (ratingFilter) {
                    filteredReviews = filteredReviews.filter(review => review.rating === parseInt(ratingFilter));
                }
                
                if (statusFilter) {
                    filteredReviews = filteredReviews.filter(review => review.status === statusFilter);
                }
                
                // Her bir değerlendirme için satır ekle
                filteredReviews.forEach(review => {
                    const row = document.createElement('tr');
                    
                    // Müşteri adını bul
                    const customer = MOCK_USERS.find(u => u.id === review.customerId);
                    const customerName = customer ? `${customer.firstName} ${customer.lastName}` : 'Bilinmeyen Müşteri';
                    
                    // İşletme adını bul
                    const business = MOCK_BUSINESSES.find(b => b.id === review.businessId);
                    const businessName = business ? business.name : 'Bilinmeyen İşletme';
                    
                    // Yıldız gösterimi oluştur
                    let starRating = '';
                    for (let i = 1; i <= 5; i++) {
                        if (i <= review.rating) {
                            starRating += '<i class="fas fa-star" style="color: gold;"></i>';
                        } else {
                            starRating += '<i class="far fa-star" style="color: #ccc;"></i>';
                        }
                    }
                    
                    // Yorumun kısaltılmış halini göster
                    const shortenedComment = review.comment ? (review.comment.length > 50 ? review.comment.substring(0, 50) + '...' : review.comment) : '';
                    
                    // Durum metni
                    let statusText = '';
                    let statusClass = '';
                    switch(review.status) {
                        case 'approved':
                            statusText = 'Onaylanmış';
                            statusClass = 'active';
                            break;
                        case 'pending':
                            statusText = 'Onay Bekliyor';
                            statusClass = 'pending';
                            break;
                        case 'rejected':
                            statusText = 'Reddedilmiş';
                            statusClass = 'cancelled';
                            break;
                        default:
                            statusText = review.status;
                            statusClass = '';
                    }
                    
                    row.innerHTML = `
                        <td>${review.id}</td>
                        <td>${customerName}</td>
                        <td>${businessName}</td>
                        <td>${starRating}</td>
                        <td>${shortenedComment}</td>
                        <td>${formatDate(review.createdAt)}</td>
                        <td><span class="status ${statusClass}">${statusText}</span></td>
                        <td class="actions">
                            <button class="btn-action view" title="Görüntüle" data-id="${review.id}"><i class="fas fa-eye"></i></button>
                            <button class="btn-action edit" title="Düzenle" data-id="${review.id}"><i class="fas fa-edit"></i></button>
                            <button class="btn-action delete" title="Sil" data-id="${review.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                });
                
                // Değerlendirme görüntüleme işlemi
                const viewButtons = tbody.querySelectorAll('.btn-action.view');
                viewButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const reviewId = this.getAttribute('data-id');
                        viewReview(reviewId);
                    });
                });
                
                // Değerlendirme düzenleme işlemi
                const editButtons = tbody.querySelectorAll('.btn-action.edit');
                editButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const reviewId = this.getAttribute('data-id');
                        editReview(reviewId);
                    });
                });
                
                // Değerlendirme silme işlemi
                const deleteButtons = tbody.querySelectorAll('.btn-action.delete');
                deleteButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const reviewId = this.getAttribute('data-id');
                        deleteReview(reviewId);
                    });
                });
            }
            
            // İşletme filtresini doldur
            const reviewBusinessFilter = document.getElementById('review-business-filter');
            if (reviewBusinessFilter) {
                MOCK_BUSINESSES.forEach(business => {
                    const option = document.createElement('option');
                    option.value = business.id;
                    option.textContent = business.name;
                    reviewBusinessFilter.appendChild(option);
                });
            }
            
            // Değerlendirme filtreleme olaylarını ekle
            const reviewSearchInput = document.getElementById('review-search');
            const reviewRatingFilter = document.getElementById('review-rating-filter');
            const reviewStatusFilter = document.getElementById('review-status-filter');
            
            if (reviewSearchInput) {
                reviewSearchInput.addEventListener('input', updateReviewsTable);
            }
            
            if (reviewBusinessFilter) {
                reviewBusinessFilter.addEventListener('change', updateReviewsTable);
            }
            
            if (reviewRatingFilter) {
                reviewRatingFilter.addEventListener('change', updateReviewsTable);
            }
            
            if (reviewStatusFilter) {
                reviewStatusFilter.addEventListener('change', updateReviewsTable);
            }
            
            // Değerlendirme görüntüleme
            function viewReview(reviewId) {
                const review = MOCK_REVIEWS.find(r => r.id === reviewId);
                if (!review) {
                    alert('Değerlendirme bulunamadı!');
                    return;
                }
                
                // Modal içeriğini doldur
                const reviewDetailModal = document.getElementById('review-detail-modal');
                
                // Müşteri bilgilerini doldur
                const customer = MOCK_USERS.find(u => u.id === review.customerId);
                document.getElementById('review-user-name').textContent = customer ? `${customer.firstName} ${customer.lastName}` : 'Bilinmeyen Müşteri';
                
                // Tarih
                document.getElementById('review-date').textContent = formatDate(review.createdAt);
                
                // Puanlama
                const ratingContainer = document.getElementById('review-rating');
                ratingContainer.innerHTML = '';
                for (let i = 1; i <= 5; i++) {
                    const star = document.createElement('i');
                    star.className = i <= review.rating ? 'fas fa-star' : 'far fa-star';
                    star.style.color = i <= review.rating ? 'gold' : '#ccc';
                    ratingContainer.appendChild(star);
                }
                
                // İşletme
                const business = MOCK_BUSINESSES.find(b => b.id === review.businessId);
                document.getElementById('review-business-name').textContent = business ? business.name : 'Bilinmeyen İşletme';
                
                // Hizmet
                const service = MOCK_SERVICES.find(s => s.id === review.serviceId);
                document.getElementById('review-service-name').textContent = service ? service.name : 'Genel Değerlendirme';
                
                // Yorum
                document.getElementById('review-comment').textContent = review.comment || 'Yorum yapılmamış';
                
                // Fotoğraflar
                const photosContainer = document.getElementById('review-photos');
                photosContainer.innerHTML = '';
                
                if (review.photos && review.photos.length > 0) {
                    review.photos.forEach(photo => {
                        const img = document.createElement('img');
                        img.src = photo;
                        img.alt = 'Değerlendirme Fotoğrafı';
                        img.className = 'review-photo';
                        photosContainer.appendChild(img);
                    });
                } else {
                    photosContainer.innerHTML = '<p>Fotoğraf yok</p>';
                }
                
                // İşletme yanıtı
                const replyContainer = document.getElementById('review-reply-container');
                if (review.reply) {
                    replyContainer.style.display = 'block';
                    document.getElementById('review-reply').textContent = review.reply;
                } else {
                    replyContainer.style.display = 'none';
                }
                
                // Durum
                const statusElement = document.getElementById('review-status-text');
                statusElement.className = 'status';
                
                switch(review.status) {
                    case 'approved':
                        statusElement.textContent = 'Onaylanmış';
                        statusElement.classList.add('active');
                        break;
                    case 'pending':
                        statusElement.textContent = 'Onay Bekliyor';
                        statusElement.classList.add('pending');
                        break;
                    case 'rejected':
                        statusElement.textContent = 'Reddedilmiş';
                        statusElement.classList.add('cancelled');
                        break;
                    default:
                        statusElement.textContent = review.status;
                }
                
                // Admin notu
                document.getElementById('review-admin-note').value = review.adminNote || '';
                
                // Onayla ve Reddet butonları
                const approveButton = document.getElementById('approve-review-btn');
                const rejectButton = document.getElementById('reject-review-btn');
                
                // Butonların olay dinleyicilerini temizle
                approveButton.replaceWith(approveButton.cloneNode(true));
                rejectButton.replaceWith(rejectButton.cloneNode(true));
                
                // Yeni olay dinleyicileri ekle
                document.getElementById('approve-review-btn').addEventListener('click', function() {
                    approveReview(reviewId);
                });
                
                document.getElementById('reject-review-btn').addEventListener('click', function() {
                    rejectReview(reviewId);
                });
                
                // Modalı aç
                reviewDetailModal.classList.add('active');
            }
            
            // Değerlendirme onayla
            function approveReview(reviewId) {
                const reviewDetailModal = document.getElementById('review-detail-modal');
                const adminNote = document.getElementById('review-admin-note').value;
                
                // Değerlendirmeyi bul ve durumunu güncelle
                const review = MOCK_REVIEWS.find(r => r.id === reviewId);
                if (review) {
                    review.status = 'approved';
                    review.adminNote = adminNote;
                    
                    // Değerlendirmeler tablosunu güncelle
                    updateReviewsTable();
                    
                    // Modalı kapat
                    reviewDetailModal.classList.remove('active');
                    
                    // Bildirim göster
                    alert('Değerlendirme onaylandı!');
                }
            }
            
            // Değerlendirme reddet
            function rejectReview(reviewId) {
                const reviewDetailModal = document.getElementById('review-detail-modal');
                const adminNote = document.getElementById('review-admin-note').value;
                
                // Admin notu zorunlu
                if (!adminNote) {
                    alert('Lütfen reddetme nedenini belirtin!');
                    return;
                }
                
                // Değerlendirmeyi bul ve durumunu güncelle
                const review = MOCK_REVIEWS.find(r => r.id === reviewId);
                if (review) {
                    review.status = 'rejected';
                    review.adminNote = adminNote;
                    
                    // Değerlendirmeler tablosunu güncelle
                    updateReviewsTable();
                    
                    // Modalı kapat
                    reviewDetailModal.classList.remove('active');
                    
                    // Bildirim göster
                    alert('Değerlendirme reddedildi!');
                }
            }
            
            // Değerlendirme düzenleme
            function editReview(reviewId) {
                const review = MOCK_REVIEWS.find(r => r.id === reviewId);
                if (!review) {
                    alert('Değerlendirme bulunamadı!');
                    return;
                }
                
                // Şimdilik görüntüleme modalını açalım, düzenleme özelliği eklenecek
                viewReview(reviewId);
            }
            
            // Değerlendirme silme
            function deleteReview(reviewId) {
                const review = MOCK_REVIEWS.find(r => r.id === reviewId);
                if (!review) {
                    alert('Değerlendirme bulunamadı!');
                    return;
                }
                
                // Müşteri adını bul
                const customer = MOCK_USERS.find(u => u.id === review.customerId);
                const customerName = customer ? `${customer.firstName} ${customer.lastName}` : 'Bilinmeyen Müşteri';
                
                if (confirm(`${customerName} tarafından yapılan değerlendirmeyi silmek istediğinize emin misiniz?`)) {
                    // Değerlendirmeyi bul ve sil
                    const index = MOCK_REVIEWS.findIndex(r => r.id === reviewId);
                    if (index !== -1) {
                        MOCK_REVIEWS.splice(index, 1);
                        
                        // Tabloyu güncelle
                        updateReviewsTable();
                        
                        // Bildirim göster
                        alert('Değerlendirme başarıyla silindi!');
                    }
                }
            }
            
            // Değerlendirme modalları için modal kapatma işlemleri
            const reviewModalCloseButtons = document.querySelectorAll('.modal-close');
            const modals = document.querySelectorAll('.modal');
            
            // Değerlendirme modallarını kapat
            reviewModalCloseButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Tüm modalları kapat
                    modals.forEach(modal => {
                        modal.classList.remove('active');
                    });
                });
            });
            
            // Modal dışına tıklandığında kapat
            modals.forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal || e.target.classList.contains('modal-overlay')) {
                        modal.classList.remove('active');
                    }
                });
            });
            
            // Rapor indirme fonksiyonu
            const exportReviewsBtn = document.getElementById('export-reviews-btn');
            if (exportReviewsBtn) {
                exportReviewsBtn.addEventListener('click', function() {
                    alert('Değerlendirmeler raporu hazırlanıyor...');
                    // Gerçek uygulamada rapor indirme işlemi burada yapılacak
                });
            }
            
            // Sayfa yüklendiğinde değerlendirmeler tablosunu güncelle
            updateReviewsTable();
        });
    </script>
</body>
</html> 